{"ast":null,"code":"import axios from 'axios';\n\n// Base URL for India Code API\nconst INDIA_CODE_API_BASE = 'https://api.indiacode.nic.in/api/v1';\n\n/**\r\n * Fetch citation details for a specific law section\r\n * @param {string} actId - The ID of the act/law\r\n * @param {string} sectionId - The section number\r\n * @returns {Promise<Object>} - Citation details\r\n */\nexport const fetchCitation = async (actId, sectionId) => {\n  try {\n    const response = await axios.get(`${INDIA_CODE_API_BASE}/acts/${actId}/sections/${sectionId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching citation:', error);\n    return null;\n  }\n};\n\n/**\r\n * Search for relevant legal sections based on keywords\r\n * @param {string} query - Search query\r\n * @returns {Promise<Array>} - List of relevant legal sections\r\n */\nexport const searchLegalSections = async query => {\n  try {\n    const response = await axios.get(`${INDIA_CODE_API_BASE}/search`, {\n      params: {\n        q: query,\n        limit: 5\n      }\n    });\n    return response.data.results;\n  } catch (error) {\n    console.error('Error searching legal sections:', error);\n    return [];\n  }\n};\n\n/**\r\n * Format a citation for display\r\n * @param {Object} citation - Citation data\r\n * @returns {Object} - Formatted citation for display\r\n */\nexport const formatCitation = citation => {\n  var _citation$act, _citation$act2;\n  if (!citation) return null;\n  return {\n    id: citation.id,\n    title: citation.title || 'Unknown Title',\n    actName: citation.actName || ((_citation$act = citation.act) === null || _citation$act === void 0 ? void 0 : _citation$act.name) || 'Unknown Act',\n    sectionNumber: citation.sectionNumber || citation.number || 'N/A',\n    year: citation.year || ((_citation$act2 = citation.act) === null || _citation$act2 === void 0 ? void 0 : _citation$act2.year) || 'N/A',\n    url: citation.url || `${INDIA_CODE_API_BASE}/acts/${citation.actId}/sections/${citation.id}`,\n    text: citation.text || citation.content || 'No content available',\n    formattedCitation: `${citation.actName || 'Act'} (${citation.year || 'N/A'}), Section ${citation.sectionNumber || 'N/A'}`\n  };\n};\n\n/**\r\n * Extract citation references from AI response\r\n * @param {string} text - AI generated response text\r\n * @returns {Array<Object>} - List of citation references\r\n */\nexport const extractCitationReferences = text => {\n  // Basic regex to find citation patterns like \"Section X of Act Y\"\n  const sectionRegex = /Section\\s+(\\d+[A-Z]?(?:-\\d+)?)\\s+of\\s+(?:the\\s+)?([^,.]+)/gi;\n\n  // Find all matches\n  const matches = [...text.matchAll(sectionRegex)];\n\n  // Format matches into citation objects\n  return matches.map((match, index) => {\n    return {\n      id: `ref-${index}`,\n      referenceId: `citation-${index}`,\n      sectionNumber: match[1],\n      actName: match[2].trim(),\n      fullMatch: match[0]\n    };\n  });\n};\n\n/**\r\n * Enhance text with citation links\r\n * @param {string} text - Original text\r\n * @param {Array<Object>} citations - List of citations\r\n * @returns {Object} - Text with citation markers and citation objects\r\n */\nexport const enhanceTextWithCitations = (text, citations) => {\n  let enhancedText = text;\n  const citationObjects = [];\n  if (citations && citations.length > 0) {\n    // Replace citation references with markers\n    citations.forEach((citation, index) => {\n      const marker = `[${index + 1}]`;\n      enhancedText = enhancedText.replace(citation.fullMatch, `${citation.fullMatch} ${marker}`);\n      citationObjects.push({\n        ...citation,\n        markerText: marker\n      });\n    });\n  }\n  return {\n    enhancedText,\n    citations: citationObjects\n  };\n};","map":{"version":3,"names":["axios","INDIA_CODE_API_BASE","fetchCitation","actId","sectionId","response","get","data","error","console","searchLegalSections","query","params","q","limit","results","formatCitation","citation","_citation$act","_citation$act2","id","title","actName","act","name","sectionNumber","number","year","url","text","content","formattedCitation","extractCitationReferences","sectionRegex","matches","matchAll","map","match","index","referenceId","trim","fullMatch","enhanceTextWithCitations","citations","enhancedText","citationObjects","length","forEach","marker","replace","push","markerText"],"sources":["D:/Legal Assistant for Indian Laws/client/src/services/citationService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Base URL for India Code API\r\nconst INDIA_CODE_API_BASE = 'https://api.indiacode.nic.in/api/v1';\r\n\r\n/**\r\n * Fetch citation details for a specific law section\r\n * @param {string} actId - The ID of the act/law\r\n * @param {string} sectionId - The section number\r\n * @returns {Promise<Object>} - Citation details\r\n */\r\nexport const fetchCitation = async (actId, sectionId) => {\r\n  try {\r\n    const response = await axios.get(`${INDIA_CODE_API_BASE}/acts/${actId}/sections/${sectionId}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching citation:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Search for relevant legal sections based on keywords\r\n * @param {string} query - Search query\r\n * @returns {Promise<Array>} - List of relevant legal sections\r\n */\r\nexport const searchLegalSections = async (query) => {\r\n  try {\r\n    const response = await axios.get(`${INDIA_CODE_API_BASE}/search`, {\r\n      params: { q: query, limit: 5 }\r\n    });\r\n    return response.data.results;\r\n  } catch (error) {\r\n    console.error('Error searching legal sections:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Format a citation for display\r\n * @param {Object} citation - Citation data\r\n * @returns {Object} - Formatted citation for display\r\n */\r\nexport const formatCitation = (citation) => {\r\n  if (!citation) return null;\r\n  \r\n  return {\r\n    id: citation.id,\r\n    title: citation.title || 'Unknown Title',\r\n    actName: citation.actName || citation.act?.name || 'Unknown Act',\r\n    sectionNumber: citation.sectionNumber || citation.number || 'N/A',\r\n    year: citation.year || citation.act?.year || 'N/A',\r\n    url: citation.url || `${INDIA_CODE_API_BASE}/acts/${citation.actId}/sections/${citation.id}`,\r\n    text: citation.text || citation.content || 'No content available',\r\n    formattedCitation: `${citation.actName || 'Act'} (${citation.year || 'N/A'}), Section ${citation.sectionNumber || 'N/A'}`\r\n  };\r\n};\r\n\r\n/**\r\n * Extract citation references from AI response\r\n * @param {string} text - AI generated response text\r\n * @returns {Array<Object>} - List of citation references\r\n */\r\nexport const extractCitationReferences = (text) => {\r\n  // Basic regex to find citation patterns like \"Section X of Act Y\"\r\n  const sectionRegex = /Section\\s+(\\d+[A-Z]?(?:-\\d+)?)\\s+of\\s+(?:the\\s+)?([^,.]+)/gi;\r\n  \r\n  // Find all matches\r\n  const matches = [...text.matchAll(sectionRegex)];\r\n  \r\n  // Format matches into citation objects\r\n  return matches.map((match, index) => {\r\n    return {\r\n      id: `ref-${index}`,\r\n      referenceId: `citation-${index}`,\r\n      sectionNumber: match[1],\r\n      actName: match[2].trim(),\r\n      fullMatch: match[0]\r\n    };\r\n  });\r\n};\r\n\r\n/**\r\n * Enhance text with citation links\r\n * @param {string} text - Original text\r\n * @param {Array<Object>} citations - List of citations\r\n * @returns {Object} - Text with citation markers and citation objects\r\n */\r\nexport const enhanceTextWithCitations = (text, citations) => {\r\n  let enhancedText = text;\r\n  const citationObjects = [];\r\n\r\n  if (citations && citations.length > 0) {\r\n    // Replace citation references with markers\r\n    citations.forEach((citation, index) => {\r\n      const marker = `[${index + 1}]`;\r\n      enhancedText = enhancedText.replace(\r\n        citation.fullMatch,\r\n        `${citation.fullMatch} ${marker}`\r\n      );\r\n      \r\n      citationObjects.push({\r\n        ...citation,\r\n        markerText: marker\r\n      });\r\n    });\r\n  }\r\n  \r\n  return {\r\n    enhancedText,\r\n    citations: citationObjects\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}