{"ast":null,"code":"var _jsxFileName = \"D:\\\\Legal Assistant for Indian Laws\\\\client\\\\src\\\\components\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Box, TextField, Button, Typography, Paper, IconButton, CircularProgress, Chip, Menu, MenuItem, InputAdornment, Tooltip, Fade, Collapse, Divider, useTheme } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport MicIcon from '@mui/icons-material/Mic';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport { useLocation } from 'react-router-dom';\nimport { processLegalQuery } from '../services/queryService';\nimport { extractCitationReferences, enhanceTextWithCitations } from '../services/citationService';\nimport CitationDisplay from './CitationDisplay';\nimport { trackQuery } from '../services/analyticsService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Chat() {\n  _s();\n  const [message, setMessage] = useState('');\n  const [chat, setChat] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [expandedCategory, setExpandedCategory] = useState(null);\n  const [showAllQueries, setShowAllQueries] = useState(false);\n  const [savedMessages, setSavedMessages] = useState([]);\n  const chatEndRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const fileInputRef = useRef(null);\n  const theme = useTheme();\n  const location = useLocation();\n\n  // Enhanced and expanded queries by category\n  const queriesByCategory = {\n    'Family Law': [\"What are the grounds for divorce in India?\", \"How can I apply for child custody in India?\", \"What is the procedure for legal adoption in India?\", \"Explain the Hindu Marriage Act provisions\", \"Muslim personal law on marriage and divorce\", \"How are maintenance and alimony calculated?\", \"What is the legal age for marriage in India?\", \"Process for divorce under Special Marriage Act\", \"What are the rights of second wife in Hindu marriage?\", \"Legal remedies for domestic violence victims\"],\n    'Property Law': [\"Explain property inheritance laws in India\", \"What are my tenant rights under Rent Control Act?\", \"How to transfer property ownership after death?\", \"Legal procedure for property registration in India\", \"What is RERA Act and how does it protect homebuyers?\", \"Rights of daughters in ancestral property\", \"Legal documentation required for land purchase\", \"How to verify property title before buying?\", \"Laws governing agricultural land ownership\", \"Legal process to challenge land encroachment\"],\n    'Criminal Law': [\"What is the process for filing an FIR?\", \"What are my rights if arrested in India?\", \"Explain the bail process in criminal cases\", \"What constitutes defamation under Indian law?\", \"Penalties for cybercrime in India\", \"How to file a criminal complaint for cheating?\", \"What is culpable homicide under IPC?\", \"Procedure for filing zero FIR in India\", \"Difference between cognizable and non-cognizable offenses\", \"Legal definition of criminal conspiracy\"],\n    'Consumer Protection': [\"Consumer rights under Consumer Protection Act\", \"How to file a consumer complaint against a company?\", \"What remedies are available for defective products?\", \"E-commerce return policy regulations in India\", \"Insurance claim rejection - legal remedies\", \"What are unfair trade practices under law?\", \"Maximum compensation in consumer cases\", \"Rights regarding misleading advertisements\", \"Banking services under Consumer Protection Act\", \"Time limit for filing consumer complaints\"],\n    'Constitutional Rights': [\"What are my fundamental rights under the Constitution?\", \"Right to Information (RTI) filing procedure\", \"Public Interest Litigation (PIL) guidelines\", \"Right to Education Act provisions\", \"Freedom of expression limitations\", \"Rights of arrested persons under Article 22\", \"Explain writ jurisdiction of High Courts\", \"Right to equality provisions explained\", \"Protection of minority rights under Constitution\", \"When can fundamental rights be suspended?\"],\n    'Labor & Employment': [\"Employee rights under Labor Laws in India\", \"Legal working hours and overtime regulations\", \"Maternity leave benefits under Indian law\", \"Sexual harassment at workplace - legal protections\", \"Termination notice period requirements\", \"PF withdrawal rules and procedure\", \"Gratuity calculation and eligibility criteria\", \"Employee provident fund contribution rates\", \"Trade union formation requirements\", \"Factory workers safety regulations\"],\n    'Business & Corporate': [\"How to register a startup in India?\", \"GST registration and compliance requirements\", \"Legal requirements for foreign investments in India\", \"Trademark registration process in India\", \"Company director liabilities under law\", \"Procedure for incorporation of LLP\", \"Legal requirements for online business\", \"Corporate tax rates and exemptions\", \"Intellectual property protection for software\", \"Statutory compliance for private limited companies\"],\n    'Civil Procedure': [\"How to file a civil suit in India?\", \"Limitation period for different types of cases\", \"Court fees for civil litigation in India\", \"Powers of civil courts in India\", \"Procedure for interim injunction\", \"How to file caveat petition?\", \"Execution of court decree procedure\", \"Appeal process in civil cases\", \"Difference between suit and petition\", \"Legal notice requirements before filing suit\"]\n  };\n\n  // Get featured categories to display when not showing all\n  const featuredCategories = ['Family Law', 'Criminal Law', 'Consumer Protection', 'Property Law'];\n  const toggleCategory = category => {\n    if (expandedCategory === category) {\n      setExpandedCategory(null);\n    } else {\n      setExpandedCategory(category);\n    }\n  };\n\n  // Process the query\n  const processQuery = useCallback(async text => {\n    try {\n      return await processLegalQuery(text);\n    } catch (error) {\n      console.error(\"Error in process query:\", error);\n      throw error;\n    }\n  }, []);\n\n  // Handle initial query from navigation state\n  useEffect(() => {\n    var _location$state;\n    if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.initialQuery) {\n      const initialQuery = location.state.initialQuery;\n      // Set message instead of sending it immediately to give user control\n      setMessage(initialQuery);\n      // Clean up navigation state\n      window.history.replaceState({}, document.title);\n    }\n  }, [location.state]);\n\n  // Scroll to bottom of chat\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [chat]);\n  const handleMenuOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n  const handleCopyChat = () => {\n    const chatText = chat.map(msg => `${msg.sender === 'user' ? 'You' : 'Legal Assistant'}: ${msg.text}`).join('\\n\\n');\n    navigator.clipboard.writeText(chatText);\n    handleMenuClose();\n  };\n  const handleClearChat = () => {\n    setChat([]);\n    handleMenuClose();\n  };\n  const handleFileUpload = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = event => {\n        // In a real app, you would send this to your backend for processing\n        setMessage(`Analyzing document: ${file.name}...`);\n      };\n      reader.readAsText(file);\n    }\n  };\n  const handleSuggestedQuery = query => {\n    setMessage(query);\n  };\n  const toggleSaveMessage = index => {\n    const updatedChat = [...chat];\n    updatedChat[index].saved = !updatedChat[index].saved;\n    setChat(updatedChat);\n\n    // Update saved messages list\n    if (updatedChat[index].saved) {\n      setSavedMessages([...savedMessages, updatedChat[index]]);\n    } else {\n      setSavedMessages(savedMessages.filter(msg => msg !== chat[index]));\n    }\n  };\n  const handleSend = async () => {\n    if (message.trim() === '') return;\n\n    // Add user message to chat\n    const userMessage = {\n      text: message,\n      sender: 'user',\n      timestamp: new Date()\n    };\n    setChat(prevChat => [...prevChat, userMessage]);\n    const userInput = message;\n    setMessage('');\n    setIsLoading(true);\n\n    // Track query start time\n    const startTime = new Date();\n    try {\n      // Send to backend API\n      const response = await processQuery(userInput);\n\n      // Extract citation references from the response\n      const citationRefs = extractCitationReferences(response);\n\n      // Enhance text with citation markers\n      const {\n        enhancedText,\n        citations\n      } = enhanceTextWithCitations(response, citationRefs);\n\n      // Add response to chat with citations\n      setChat(prevChat => [...prevChat, {\n        text: enhancedText,\n        sender: 'bot',\n        timestamps: new Date(),\n        citations: citations,\n        saved: false\n      }]);\n\n      // Track analytics data\n      trackQuery({\n        query: userInput,\n        responseTime: new Date() - startTime,\n        citationsCount: citations.length,\n        citationsSources: citations.map(c => `${c.actName}, Section ${c.sectionNumber}`),\n        timestamp: new Date().toISOString(),\n        queryLength: userInput.length,\n        category: detectQueryCategory(userInput)\n      });\n    } catch (error) {\n      console.error('Error processing message:', error);\n      setChat(prevChat => [...prevChat, {\n        text: 'Sorry, I encountered an error processing your request.',\n        sender: 'bot',\n        error: true,\n        timestamp: new Date()\n      }]);\n\n      // Track failed query\n      trackQuery({\n        query: userInput,\n        error: true,\n        timestamp: new Date().toISOString(),\n        responseTime: new Date() - startTime\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Simple function to detect query category based on keywords\n  const detectQueryCategory = query => {\n    const lowercaseQuery = query.toLowerCase();\n    if (lowercaseQuery.includes('divorce') || lowercaseQuery.includes('marriage') || lowercaseQuery.includes('custody') || lowercaseQuery.includes('alimony')) {\n      return 'Family Law';\n    } else if (lowercaseQuery.includes('property') || lowercaseQuery.includes('land') || lowercaseQuery.includes('rent') || lowercaseQuery.includes('tenant')) {\n      return 'Property Law';\n    } else if (lowercaseQuery.includes('theft') || lowercaseQuery.includes('murder') || lowercaseQuery.includes('bail') || lowercaseQuery.includes('police')) {\n      return 'Criminal Law';\n    } else if (lowercaseQuery.includes('constitution') || lowercaseQuery.includes('rights') || lowercaseQuery.includes('fundamental')) {\n      return 'Constitutional Law';\n    } else if (lowercaseQuery.includes('company') || lowercaseQuery.includes('business') || lowercaseQuery.includes('contract')) {\n      return 'Corporate Law';\n    } else if (lowercaseQuery.includes('refund') || lowercaseQuery.includes('product') || lowercaseQuery.includes('service') || lowercaseQuery.includes('warranty')) {\n      return 'Consumer Protection';\n    }\n    return 'General Legal';\n  };\n\n  // Recording functionality remains the same\n  const startRecording = () => {\n    console.log(\"Start recording\");\n    setIsRecording(true);\n  };\n  const stopRecording = () => {\n    console.log(\"Stop recording\");\n    setIsRecording(false);\n  };\n  const formatTime = date => {\n    return new Date(date).toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: 'calc(100vh - 64px)',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        borderBottom: 1,\n        borderColor: 'divider',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: \"Legal Assistant Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handleMenuOpen,\n        children: /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu, {\n        anchorEl: anchorEl,\n        open: Boolean(anchorEl),\n        onClose: handleMenuClose,\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleCopyChat,\n          children: [/*#__PURE__*/_jsxDEV(ContentCopyIcon, {\n            fontSize: \"small\",\n            sx: {\n              mr: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), \"Copy Chat\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleClearChat,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"error\",\n            children: \"Clear Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 1.5,\n        borderBottom: 1,\n        borderColor: 'divider',\n        maxHeight: '200px',\n        overflowY: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          children: \"Suggested Legal Queries\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          size: \"small\",\n          onClick: () => setShowAllQueries(!showAllQueries),\n          sx: {\n            minWidth: 'auto',\n            py: 0\n          },\n          children: showAllQueries ? 'Show Less' : 'More Categories'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 0.5\n        },\n        children: Object.keys(queriesByCategory).filter(category => showAllQueries || featuredCategories.includes(category)).map(category => /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            onClick: () => toggleCategory(category),\n            sx: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              cursor: 'pointer',\n              bgcolor: 'background.paper',\n              p: 0.5,\n              borderRadius: 1,\n              '&:hover': {\n                bgcolor: 'action.hover'\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              fontWeight: \"medium\",\n              children: category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              children: expandedCategory === category ? 'âˆ’' : '+'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: expandedCategory === category,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                flexWrap: 'wrap',\n                gap: 0.5,\n                p: 0.5,\n                ml: 1\n              },\n              children: queriesByCategory[category].map((query, index) => /*#__PURE__*/_jsxDEV(Chip, {\n                label: query,\n                onClick: () => handleSuggestedQuery(query),\n                clickable: true,\n                variant: \"outlined\",\n                size: \"small\",\n                sx: {\n                  m: 0.2\n                }\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 17\n          }, this)]\n        }, category, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        flexDirection: 'column',\n        flexGrow: 1,\n        overflow: 'auto',\n        p: 2,\n        gap: 2\n      },\n      children: [chat.map((msg, index) => /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignSelf: msg.sender === 'user' ? 'flex-end' : 'flex-start',\n          maxWidth: '80%',\n          position: 'relative'\n        },\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: msg.sender === 'user' ? 0 : 1,\n          sx: {\n            p: 2,\n            borderRadius: 2,\n            backgroundColor: msg.sender === 'user' ? theme.palette.primary.light : theme.palette.background.paper,\n            color: msg.sender === 'user' ? theme.palette.primary.contrastText : 'inherit',\n            border: msg.sender === 'user' ? 'none' : `1px solid ${theme.palette.divider}`\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: msg.sender === 'user' ? 'inherit' : 'text.secondary',\n              children: msg.sender === 'user' ? 'You' : 'Legal Assistant'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 17\n            }, this), msg.timestamp && /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: msg.sender === 'user' ? 'inherit' : 'text.secondary',\n              children: formatTime(msg.timestamp)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 15\n          }, this), msg.error && /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"error\",\n            variant: \"caption\",\n            sx: {\n              mt: 1,\n              display: 'block'\n            },\n            children: \"Please try reformulating your question.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 17\n          }, this), msg.citations && msg.citations.length > 0 && /*#__PURE__*/_jsxDEV(CitationDisplay, {\n            citations: msg.citations\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 17\n          }, this), msg.sender === 'bot' && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'flex-end',\n              mt: 1,\n              opacity: 0.7,\n              '&:hover': {\n                opacity: 1\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Copy response\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => navigator.clipboard.writeText(msg.text),\n                children: /*#__PURE__*/_jsxDEV(ContentCopyIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: msg.saved ? \"Unsave message\" : \"Save message\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => toggleSaveMessage(index),\n                color: msg.saved ? \"primary\" : \"default\",\n                children: msg.saved ? /*#__PURE__*/_jsxDEV(BookmarkIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 36\n                }, this) : /*#__PURE__*/_jsxDEV(BookmarkBorderIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 72\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 11\n      }, this)), isLoading && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 2,\n          alignSelf: 'flex-start'\n        },\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 1,\n          sx: {\n            p: 2,\n            borderRadius: 2,\n            display: 'flex',\n            alignItems: 'center',\n            gap: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: \"Processing your request...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        borderTop: 1,\n        borderColor: 'divider',\n        backgroundColor: theme.palette.background.paper\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          variant: \"outlined\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          placeholder: \"Type your legal question...\",\n          onKeyPress: e => e.key === 'Enter' && handleSend(),\n          InputProps: {\n            endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"end\",\n              children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Attach Document\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  edge: \"end\",\n                  onClick: () => {\n                    var _fileInputRef$current;\n                    return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                  },\n                  children: /*#__PURE__*/_jsxDEV(AttachFileIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 573,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 568,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                ref: fileInputRef,\n                style: {\n                  display: 'none'\n                },\n                accept: \".pdf,.doc,.docx,.txt\",\n                onChange: handleFileUpload\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 17\n            }, this)\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          color: isRecording ? \"secondary\" : \"primary\",\n          onClick: isRecording ? stopRecording : startRecording,\n          children: /*#__PURE__*/_jsxDEV(MicIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          endIcon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 22\n          }, this),\n          onClick: handleSend,\n          disabled: isLoading || message.trim() === '',\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          mt: 1,\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          color: \"text.secondary\",\n          sx: {\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(HelpOutlineIcon, {\n            fontSize: \"small\",\n            sx: {\n              mr: 0.5\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 13\n          }, this), \"Ask any legal question about Indian law\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Chip, {\n          label: \"AI Powered\",\n          size: \"small\",\n          color: \"primary\",\n          variant: \"outlined\",\n          sx: {\n            height: 24\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 339,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"wkrg0GzLrZNJoY2+0LxmI98rrqY=\", false, function () {\n  return [useTheme, useLocation];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Box","TextField","Button","Typography","Paper","IconButton","CircularProgress","Chip","Menu","MenuItem","InputAdornment","Tooltip","Fade","Collapse","Divider","useTheme","SendIcon","MicIcon","MoreVertIcon","HelpOutlineIcon","ContentCopyIcon","BookmarkIcon","BookmarkBorderIcon","AttachFileIcon","useLocation","processLegalQuery","extractCitationReferences","enhanceTextWithCitations","CitationDisplay","trackQuery","jsxDEV","_jsxDEV","Chat","_s","message","setMessage","chat","setChat","isLoading","setIsLoading","isRecording","setIsRecording","anchorEl","setAnchorEl","expandedCategory","setExpandedCategory","showAllQueries","setShowAllQueries","savedMessages","setSavedMessages","chatEndRef","mediaRecorderRef","audioChunksRef","fileInputRef","theme","location","queriesByCategory","featuredCategories","toggleCategory","category","processQuery","text","error","console","_location$state","state","initialQuery","window","history","replaceState","document","title","_chatEndRef$current","current","scrollIntoView","behavior","handleMenuOpen","event","currentTarget","handleMenuClose","handleCopyChat","chatText","map","msg","sender","join","navigator","clipboard","writeText","handleClearChat","handleFileUpload","e","file","target","files","reader","FileReader","onload","name","readAsText","handleSuggestedQuery","query","toggleSaveMessage","index","updatedChat","saved","filter","handleSend","trim","userMessage","timestamp","Date","prevChat","userInput","startTime","response","citationRefs","enhancedText","citations","timestamps","responseTime","citationsCount","length","citationsSources","c","actName","sectionNumber","toISOString","queryLength","detectQueryCategory","lowercaseQuery","toLowerCase","includes","startRecording","log","stopRecording","formatTime","date","toLocaleTimeString","hour","minute","sx","display","flexDirection","height","position","children","p","borderBottom","borderColor","justifyContent","alignItems","variant","fileName","_jsxFileName","lineNumber","columnNumber","onClick","open","Boolean","onClose","fontSize","mr","color","maxHeight","overflowY","mb","size","minWidth","py","gap","Object","keys","cursor","bgcolor","borderRadius","fontWeight","in","flexWrap","ml","label","clickable","m","flexGrow","overflow","alignSelf","maxWidth","elevation","backgroundColor","palette","primary","light","background","paper","contrastText","border","divider","mt","opacity","ref","borderTop","fullWidth","value","onChange","placeholder","onKeyPress","key","InputProps","endAdornment","edge","_fileInputRef$current","click","type","style","accept","endIcon","disabled","_c","$RefreshReg$"],"sources":["D:/Legal Assistant for Indian Laws/client/src/components/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { \r\n  Box, \r\n  TextField, \r\n  Button, \r\n  Typography, \r\n  Paper, \r\n  IconButton,\r\n  CircularProgress,\r\n  Chip,\r\n  Menu,\r\n  MenuItem,\r\n  InputAdornment,\r\n  Tooltip,\r\n  Fade,\r\n  Collapse,\r\n  Divider,\r\n  useTheme\r\n} from '@mui/material';\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport MicIcon from '@mui/icons-material/Mic';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\r\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy';\r\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\r\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\r\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { processLegalQuery } from '../services/queryService';\r\nimport { extractCitationReferences, enhanceTextWithCitations } from '../services/citationService';\r\nimport CitationDisplay from './CitationDisplay';\r\nimport { trackQuery } from '../services/analyticsService';\r\n\r\nfunction Chat() {\r\n  const [message, setMessage] = useState('');\r\n  const [chat, setChat] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [expandedCategory, setExpandedCategory] = useState(null);\r\n  const [showAllQueries, setShowAllQueries] = useState(false);\r\n  const [savedMessages, setSavedMessages] = useState([]);\r\n  const chatEndRef = useRef(null);\r\n  const mediaRecorderRef = useRef(null);\r\n  const audioChunksRef = useRef([]);\r\n  const fileInputRef = useRef(null);\r\n  const theme = useTheme();\r\n  const location = useLocation();\r\n  \r\n  // Enhanced and expanded queries by category\r\n  const queriesByCategory = {\r\n    'Family Law': [\r\n      \"What are the grounds for divorce in India?\",\r\n      \"How can I apply for child custody in India?\",\r\n      \"What is the procedure for legal adoption in India?\",\r\n      \"Explain the Hindu Marriage Act provisions\",\r\n      \"Muslim personal law on marriage and divorce\",\r\n      \"How are maintenance and alimony calculated?\",\r\n      \"What is the legal age for marriage in India?\",\r\n      \"Process for divorce under Special Marriage Act\",\r\n      \"What are the rights of second wife in Hindu marriage?\",\r\n      \"Legal remedies for domestic violence victims\"\r\n    ],\r\n    'Property Law': [\r\n      \"Explain property inheritance laws in India\",\r\n      \"What are my tenant rights under Rent Control Act?\",\r\n      \"How to transfer property ownership after death?\",\r\n      \"Legal procedure for property registration in India\",\r\n      \"What is RERA Act and how does it protect homebuyers?\",\r\n      \"Rights of daughters in ancestral property\",\r\n      \"Legal documentation required for land purchase\",\r\n      \"How to verify property title before buying?\",\r\n      \"Laws governing agricultural land ownership\",\r\n      \"Legal process to challenge land encroachment\"\r\n    ],\r\n    'Criminal Law': [\r\n      \"What is the process for filing an FIR?\",\r\n      \"What are my rights if arrested in India?\",\r\n      \"Explain the bail process in criminal cases\",\r\n      \"What constitutes defamation under Indian law?\",\r\n      \"Penalties for cybercrime in India\",\r\n      \"How to file a criminal complaint for cheating?\",\r\n      \"What is culpable homicide under IPC?\",\r\n      \"Procedure for filing zero FIR in India\",\r\n      \"Difference between cognizable and non-cognizable offenses\",\r\n      \"Legal definition of criminal conspiracy\"\r\n    ],\r\n    'Consumer Protection': [\r\n      \"Consumer rights under Consumer Protection Act\",\r\n      \"How to file a consumer complaint against a company?\",\r\n      \"What remedies are available for defective products?\",\r\n      \"E-commerce return policy regulations in India\",\r\n      \"Insurance claim rejection - legal remedies\",\r\n      \"What are unfair trade practices under law?\",\r\n      \"Maximum compensation in consumer cases\",\r\n      \"Rights regarding misleading advertisements\",\r\n      \"Banking services under Consumer Protection Act\",\r\n      \"Time limit for filing consumer complaints\"\r\n    ],\r\n    'Constitutional Rights': [\r\n      \"What are my fundamental rights under the Constitution?\",\r\n      \"Right to Information (RTI) filing procedure\",\r\n      \"Public Interest Litigation (PIL) guidelines\",\r\n      \"Right to Education Act provisions\",\r\n      \"Freedom of expression limitations\",\r\n      \"Rights of arrested persons under Article 22\",\r\n      \"Explain writ jurisdiction of High Courts\",\r\n      \"Right to equality provisions explained\",\r\n      \"Protection of minority rights under Constitution\",\r\n      \"When can fundamental rights be suspended?\"\r\n    ],\r\n    'Labor & Employment': [\r\n      \"Employee rights under Labor Laws in India\",\r\n      \"Legal working hours and overtime regulations\",\r\n      \"Maternity leave benefits under Indian law\",\r\n      \"Sexual harassment at workplace - legal protections\",\r\n      \"Termination notice period requirements\",\r\n      \"PF withdrawal rules and procedure\",\r\n      \"Gratuity calculation and eligibility criteria\",\r\n      \"Employee provident fund contribution rates\",\r\n      \"Trade union formation requirements\",\r\n      \"Factory workers safety regulations\"\r\n    ],\r\n    'Business & Corporate': [\r\n      \"How to register a startup in India?\",\r\n      \"GST registration and compliance requirements\",\r\n      \"Legal requirements for foreign investments in India\",\r\n      \"Trademark registration process in India\",\r\n      \"Company director liabilities under law\",\r\n      \"Procedure for incorporation of LLP\",\r\n      \"Legal requirements for online business\",\r\n      \"Corporate tax rates and exemptions\",\r\n      \"Intellectual property protection for software\",\r\n      \"Statutory compliance for private limited companies\"\r\n    ],\r\n    'Civil Procedure': [\r\n      \"How to file a civil suit in India?\",\r\n      \"Limitation period for different types of cases\",\r\n      \"Court fees for civil litigation in India\",\r\n      \"Powers of civil courts in India\",\r\n      \"Procedure for interim injunction\",\r\n      \"How to file caveat petition?\",\r\n      \"Execution of court decree procedure\",\r\n      \"Appeal process in civil cases\",\r\n      \"Difference between suit and petition\",\r\n      \"Legal notice requirements before filing suit\"\r\n    ]\r\n  };\r\n\r\n  // Get featured categories to display when not showing all\r\n  const featuredCategories = ['Family Law', 'Criminal Law', 'Consumer Protection', 'Property Law'];\r\n  \r\n  const toggleCategory = (category) => {\r\n    if (expandedCategory === category) {\r\n      setExpandedCategory(null);\r\n    } else {\r\n      setExpandedCategory(category);\r\n    }\r\n  };\r\n\r\n  // Process the query\r\n  const processQuery = useCallback(async (text) => {\r\n    try {\r\n      return await processLegalQuery(text);\r\n    } catch (error) {\r\n      console.error(\"Error in process query:\", error);\r\n      throw error;\r\n    }\r\n  }, []);\r\n\r\n  // Handle initial query from navigation state\r\n  useEffect(() => {\r\n    if (location.state?.initialQuery) {\r\n      const initialQuery = location.state.initialQuery;\r\n      // Set message instead of sending it immediately to give user control\r\n      setMessage(initialQuery);\r\n      // Clean up navigation state\r\n      window.history.replaceState({}, document.title);\r\n    }\r\n  }, [location.state]);\r\n\r\n  // Scroll to bottom of chat\r\n  useEffect(() => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [chat]);\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleCopyChat = () => {\r\n    const chatText = chat.map(msg => `${msg.sender === 'user' ? 'You' : 'Legal Assistant'}: ${msg.text}`).join('\\n\\n');\r\n    navigator.clipboard.writeText(chatText);\r\n    handleMenuClose();\r\n  };\r\n\r\n  const handleClearChat = () => {\r\n    setChat([]);\r\n    handleMenuClose();\r\n  };\r\n\r\n  const handleFileUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        // In a real app, you would send this to your backend for processing\r\n        setMessage(`Analyzing document: ${file.name}...`);\r\n      };\r\n      reader.readAsText(file);\r\n    }\r\n  };\r\n\r\n  const handleSuggestedQuery = (query) => {\r\n    setMessage(query);\r\n  };\r\n\r\n  const toggleSaveMessage = (index) => {\r\n    const updatedChat = [...chat];\r\n    updatedChat[index].saved = !updatedChat[index].saved;\r\n    setChat(updatedChat);\r\n    \r\n    // Update saved messages list\r\n    if (updatedChat[index].saved) {\r\n      setSavedMessages([...savedMessages, updatedChat[index]]);\r\n    } else {\r\n      setSavedMessages(savedMessages.filter(msg => msg !== chat[index]));\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if (message.trim() === '') return;\r\n    \r\n    // Add user message to chat\r\n    const userMessage = { text: message, sender: 'user', timestamp: new Date() };\r\n    setChat(prevChat => [...prevChat, userMessage]);\r\n    const userInput = message;\r\n    setMessage('');\r\n    setIsLoading(true);\r\n    \r\n    // Track query start time\r\n    const startTime = new Date();\r\n    \r\n    try {\r\n      // Send to backend API\r\n      const response = await processQuery(userInput);\r\n      \r\n      // Extract citation references from the response\r\n      const citationRefs = extractCitationReferences(response);\r\n      \r\n      // Enhance text with citation markers\r\n      const { enhancedText, citations } = enhanceTextWithCitations(response, citationRefs);\r\n      \r\n      // Add response to chat with citations\r\n      setChat(prevChat => [...prevChat, { \r\n        text: enhancedText, \r\n        sender: 'bot',\r\n        timestamps: new Date(),\r\n        citations: citations,\r\n        saved: false\r\n      }]);\r\n      \r\n      // Track analytics data\r\n      trackQuery({\r\n        query: userInput,\r\n        responseTime: new Date() - startTime,\r\n        citationsCount: citations.length,\r\n        citationsSources: citations.map(c => `${c.actName}, Section ${c.sectionNumber}`),\r\n        timestamp: new Date().toISOString(),\r\n        queryLength: userInput.length,\r\n        category: detectQueryCategory(userInput)\r\n      });\r\n    } catch (error) {\r\n      console.error('Error processing message:', error);\r\n      setChat(prevChat => [...prevChat, { \r\n        text: 'Sorry, I encountered an error processing your request.', \r\n        sender: 'bot',\r\n        error: true,\r\n        timestamp: new Date()\r\n      }]);\r\n      \r\n      // Track failed query\r\n      trackQuery({\r\n        query: userInput,\r\n        error: true,\r\n        timestamp: new Date().toISOString(),\r\n        responseTime: new Date() - startTime\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  // Simple function to detect query category based on keywords\r\n  const detectQueryCategory = (query) => {\r\n    const lowercaseQuery = query.toLowerCase();\r\n    if (lowercaseQuery.includes('divorce') || lowercaseQuery.includes('marriage') || \r\n        lowercaseQuery.includes('custody') || lowercaseQuery.includes('alimony')) {\r\n      return 'Family Law';\r\n    } else if (lowercaseQuery.includes('property') || lowercaseQuery.includes('land') || \r\n               lowercaseQuery.includes('rent') || lowercaseQuery.includes('tenant')) {\r\n      return 'Property Law';\r\n    } else if (lowercaseQuery.includes('theft') || lowercaseQuery.includes('murder') || \r\n               lowercaseQuery.includes('bail') || lowercaseQuery.includes('police')) {\r\n      return 'Criminal Law';\r\n    } else if (lowercaseQuery.includes('constitution') || lowercaseQuery.includes('rights') || \r\n               lowercaseQuery.includes('fundamental')) {\r\n      return 'Constitutional Law';\r\n    } else if (lowercaseQuery.includes('company') || lowercaseQuery.includes('business') || \r\n               lowercaseQuery.includes('contract')) {\r\n      return 'Corporate Law';\r\n    } else if (lowercaseQuery.includes('refund') || lowercaseQuery.includes('product') || \r\n               lowercaseQuery.includes('service') || lowercaseQuery.includes('warranty')) {\r\n      return 'Consumer Protection';\r\n    }\r\n    return 'General Legal';\r\n  };\r\n  \r\n  // Recording functionality remains the same\r\n  const startRecording = () => {\r\n    console.log(\"Start recording\");\r\n    setIsRecording(true);\r\n  };\r\n  \r\n  const stopRecording = () => {\r\n    console.log(\"Stop recording\");\r\n    setIsRecording(false);\r\n  };\r\n\r\n  const formatTime = (date) => {\r\n    return new Date(date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ \r\n      display: 'flex', \r\n      flexDirection: 'column', \r\n      height: 'calc(100vh - 64px)',\r\n      position: 'relative'\r\n    }}>\r\n      {/* Chat header */}\r\n      <Box sx={{ \r\n        p: 2, \r\n        borderBottom: 1, \r\n        borderColor: 'divider', \r\n        display: 'flex', \r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <Typography variant=\"h6\">Legal Assistant Chat</Typography>\r\n        <IconButton onClick={handleMenuOpen}>\r\n          <MoreVertIcon />\r\n        </IconButton>\r\n        <Menu\r\n          anchorEl={anchorEl}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleMenuClose}\r\n        >\r\n          <MenuItem onClick={handleCopyChat}>\r\n            <ContentCopyIcon fontSize=\"small\" sx={{ mr: 1 }} />\r\n            Copy Chat\r\n          </MenuItem>\r\n          <MenuItem onClick={handleClearChat}>\r\n            <Typography color=\"error\">Clear Chat</Typography>\r\n          </MenuItem>\r\n        </Menu>\r\n      </Box>\r\n      \r\n      {/* Suggested queries - always visible, not in Collapse */}\r\n      <Box sx={{ \r\n        p: 1.5,\r\n        borderBottom: 1,\r\n        borderColor: 'divider',\r\n        maxHeight: '200px',\r\n        overflowY: 'auto'\r\n      }}>\r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\r\n          <Typography variant=\"subtitle2\">Suggested Legal Queries</Typography>\r\n          <Button \r\n            size=\"small\" \r\n            onClick={() => setShowAllQueries(!showAllQueries)}\r\n            sx={{ minWidth: 'auto', py: 0 }}\r\n          >\r\n            {showAllQueries ? 'Show Less' : 'More Categories'}\r\n          </Button>\r\n        </Box>\r\n        \r\n        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 0.5 }}>\r\n          {Object.keys(queriesByCategory)\r\n            .filter(category => showAllQueries || featuredCategories.includes(category))\r\n            .map((category) => (\r\n              <Box key={category}>\r\n                <Box \r\n                  onClick={() => toggleCategory(category)}\r\n                  sx={{ \r\n                    display: 'flex', \r\n                    justifyContent: 'space-between', \r\n                    alignItems: 'center',\r\n                    cursor: 'pointer',\r\n                    bgcolor: 'background.paper',\r\n                    p: 0.5,\r\n                    borderRadius: 1,\r\n                    '&:hover': { bgcolor: 'action.hover' }\r\n                  }}\r\n                >\r\n                  <Typography variant=\"body2\" fontWeight=\"medium\">{category}</Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    {expandedCategory === category ? 'âˆ’' : '+'}\r\n                  </Typography>\r\n                </Box>\r\n                \r\n                <Collapse in={expandedCategory === category}>\r\n                  <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, p: 0.5, ml: 1 }}>\r\n                    {queriesByCategory[category].map((query, index) => (\r\n                      <Chip \r\n                        key={index} \r\n                        label={query} \r\n                        onClick={() => handleSuggestedQuery(query)} \r\n                        clickable \r\n                        variant=\"outlined\"\r\n                        size=\"small\"\r\n                        sx={{ m: 0.2 }}\r\n                      />\r\n                    ))}\r\n                  </Box>\r\n                </Collapse>\r\n              </Box>\r\n          ))}\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Chat messages display */}\r\n      <Box sx={{ \r\n        display: 'flex', \r\n        flexDirection: 'column', \r\n        flexGrow: 1, \r\n        overflow: 'auto',\r\n        p: 2,\r\n        gap: 2\r\n      }}>\r\n        {chat.map((msg, index) => (\r\n          <Box \r\n            key={index} \r\n            sx={{ \r\n              display: 'flex', \r\n              flexDirection: 'column',\r\n              alignSelf: msg.sender === 'user' ? 'flex-end' : 'flex-start',\r\n              maxWidth: '80%',\r\n              position: 'relative'\r\n            }}\r\n          >\r\n            <Paper \r\n              elevation={msg.sender === 'user' ? 0 : 1}\r\n              sx={{ \r\n                p: 2,\r\n                borderRadius: 2,\r\n                backgroundColor: msg.sender === 'user' \r\n                  ? theme.palette.primary.light \r\n                  : theme.palette.background.paper,\r\n                color: msg.sender === 'user' ? theme.palette.primary.contrastText : 'inherit',\r\n                border: msg.sender === 'user' ? 'none' : `1px solid ${theme.palette.divider}`\r\n              }}\r\n            >\r\n              {/* Message header */}\r\n              <Box sx={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between', \r\n                alignItems: 'center', \r\n                mb: 1 \r\n              }}>\r\n                <Typography variant=\"caption\" color={msg.sender === 'user' ? 'inherit' : 'text.secondary'}>\r\n                  {msg.sender === 'user' ? 'You' : 'Legal Assistant'}\r\n                </Typography>\r\n                {msg.timestamp && (\r\n                  <Typography variant=\"caption\" color={msg.sender === 'user' ? 'inherit' : 'text.secondary'}>\r\n                    {formatTime(msg.timestamp)}\r\n                  </Typography>\r\n                )}\r\n              </Box>\r\n              \r\n              <Typography variant=\"body1\">{msg.text}</Typography>\r\n              \r\n              {msg.error && (\r\n                <Typography color=\"error\" variant=\"caption\" sx={{ mt: 1, display: 'block' }}>\r\n                  Please try reformulating your question.\r\n                </Typography>\r\n              )}\r\n              \r\n              {msg.citations && msg.citations.length > 0 && (\r\n                <CitationDisplay citations={msg.citations} />\r\n              )}\r\n              \r\n              {/* Message actions */}\r\n              {msg.sender === 'bot' && (\r\n                <Box sx={{ \r\n                  display: 'flex', \r\n                  justifyContent: 'flex-end', \r\n                  mt: 1,\r\n                  opacity: 0.7,\r\n                  '&:hover': { opacity: 1 }\r\n                }}>\r\n                  <Tooltip title=\"Copy response\">\r\n                    <IconButton \r\n                      size=\"small\" \r\n                      onClick={() => navigator.clipboard.writeText(msg.text)}\r\n                    >\r\n                      <ContentCopyIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <Tooltip title={msg.saved ? \"Unsave message\" : \"Save message\"}>\r\n                    <IconButton \r\n                      size=\"small\" \r\n                      onClick={() => toggleSaveMessage(index)}\r\n                      color={msg.saved ? \"primary\" : \"default\"}\r\n                    >\r\n                      {msg.saved ? <BookmarkIcon fontSize=\"small\" /> : <BookmarkBorderIcon fontSize=\"small\" />}\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </Box>\r\n              )}\r\n            </Paper>\r\n          </Box>\r\n        ))}\r\n        \r\n        {isLoading && (\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, alignSelf: 'flex-start' }}>\r\n            <Paper \r\n              elevation={1}\r\n              sx={{ \r\n                p: 2,\r\n                borderRadius: 2,\r\n                display: 'flex', \r\n                alignItems: 'center', \r\n                gap: 2\r\n              }}\r\n            >\r\n              <CircularProgress size={20} />\r\n              <Typography>Processing your request...</Typography>\r\n            </Paper>\r\n          </Box>\r\n        )}\r\n        \r\n        <div ref={chatEndRef} />\r\n      </Box>\r\n      \r\n      {/* Input area */}\r\n      <Box sx={{ \r\n        p: 2, \r\n        borderTop: 1, \r\n        borderColor: 'divider', \r\n        backgroundColor: theme.palette.background.paper\r\n      }}>\r\n        <Box sx={{ display: 'flex', gap: 1 }}>\r\n          <TextField\r\n            fullWidth\r\n            variant=\"outlined\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            placeholder=\"Type your legal question...\"\r\n            onKeyPress={(e) => e.key === 'Enter' && handleSend()}\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <Tooltip title=\"Attach Document\">\r\n                    <IconButton \r\n                      edge=\"end\" \r\n                      onClick={() => fileInputRef.current?.click()}\r\n                    >\r\n                      <AttachFileIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <input\r\n                    type=\"file\"\r\n                    ref={fileInputRef}\r\n                    style={{ display: 'none' }}\r\n                    accept=\".pdf,.doc,.docx,.txt\"\r\n                    onChange={handleFileUpload}\r\n                  />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n          <IconButton \r\n            color={isRecording ? \"secondary\" : \"primary\"}\r\n            onClick={isRecording ? stopRecording : startRecording}\r\n          >\r\n            <MicIcon />\r\n          </IconButton>\r\n          <Button \r\n            variant=\"contained\" \r\n            endIcon={<SendIcon />} \r\n            onClick={handleSend}\r\n            disabled={isLoading || message.trim() === ''}\r\n          >\r\n            Send\r\n          </Button>\r\n        </Box>\r\n        \r\n        <Box sx={{ display: 'flex', alignItems: 'center', mt: 1, justifyContent: 'space-between' }}>\r\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center' }}>\r\n            <HelpOutlineIcon fontSize=\"small\" sx={{ mr: 0.5 }} />\r\n            Ask any legal question about Indian law\r\n          </Typography>\r\n          <Chip \r\n            label=\"AI Powered\" \r\n            size=\"small\" \r\n            color=\"primary\" \r\n            variant=\"outlined\" \r\n            sx={{ height: 24 }}\r\n          />\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}