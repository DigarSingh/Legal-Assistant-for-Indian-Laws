{"ast":null,"code":"var _jsxFileName = \"D:\\\\Legal Assistant for Indian Laws\\\\client\\\\src\\\\components\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Box, TextField, Button, Typography, Paper, IconButton, CircularProgress, Chip, Menu, MenuItem, InputAdornment, Tooltip, Fade, Collapse, Divider, useTheme } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport MicIcon from '@mui/icons-material/Mic';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport { useLocation } from 'react-router-dom';\nimport { processLegalQuery } from '../services/queryService';\nimport { extractCitationReferences, enhanceTextWithCitations } from '../services/citationService';\nimport CitationDisplay from './CitationDisplay';\nimport { trackQuery } from '../services/analyticsService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Chat() {\n  _s();\n  const [message, setMessage] = useState('');\n  const [chat, setChat] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [expandedCategory, setExpandedCategory] = useState(null);\n  const [showAllQueries, setShowAllQueries] = useState(false);\n  const [savedMessages, setSavedMessages] = useState([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const chatEndRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const fileInputRef = useRef(null);\n  const theme = useTheme();\n  const location = useLocation();\n\n  // Organize queries by category\n  const queriesByCategory = {\n    'Family Law': [\"What are the grounds for divorce in India?\", \"How can I apply for child custody in India?\", \"What is the procedure for legal adoption in India?\", \"Explain the Hindu Marriage Act provisions\", \"Muslim personal law on marriage and divorce\", \"How are maintenance and alimony calculated?\"],\n    'Property Law': [\"Explain property inheritance laws in India\", \"What are my tenant rights under Rent Control Act?\", \"How to transfer property ownership after death?\", \"Legal procedure for property registration in India\", \"What is RERA Act and how does it protect homebuyers?\"],\n    'Criminal Law': [\"What is the process for filing an FIR?\", \"What are my rights if arrested in India?\", \"Explain the bail process in criminal cases\", \"What constitutes defamation under Indian law?\", \"Penalties for cybercrime in India\"],\n    'Consumer Protection': [\"Consumer rights under Consumer Protection Act\", \"How to file a consumer complaint against a company?\", \"What remedies are available for defective products?\", \"E-commerce return policy regulations in India\"],\n    'Constitutional Rights': [\"What are my fundamental rights under the Constitution?\", \"Right to Information (RTI) filing procedure\", \"Public Interest Litigation (PIL) guidelines\"],\n    'Other Legal Topics': [\"How to register a startup in India?\", \"Procedure for making a legally valid Will\", \"How to apply for legal aid in India?\", \"Medical negligence claims in India\"]\n  };\n\n  // Get featured categories to display when not showing all\n  const featuredCategories = ['Family Law', 'Criminal Law', 'Consumer Protection'];\n  const toggleCategory = category => {\n    if (expandedCategory === category) {\n      setExpandedCategory(null);\n    } else {\n      setExpandedCategory(category);\n    }\n  };\n\n  // Process the query\n  const processQuery = useCallback(async text => {\n    try {\n      return await processLegalQuery(text);\n    } catch (error) {\n      console.error(\"Error in process query:\", error);\n      throw error;\n    }\n  }, []);\n\n  // Handle initial query from navigation state\n  useEffect(() => {\n    var _location$state;\n    if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.initialQuery) {\n      const initialQuery = location.state.initialQuery;\n      // Set message instead of sending it immediately to give user control\n      setMessage(initialQuery);\n      // Clean up navigation state\n      window.history.replaceState({}, document.title);\n    }\n  }, [location.state]);\n\n  // Scroll to bottom of chat\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [chat]);\n  const handleMenuOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n  const handleCopyChat = () => {\n    const chatText = chat.map(msg => `${msg.sender === 'user' ? 'You' : 'Legal Assistant'}: ${msg.text}`).join('\\n\\n');\n    navigator.clipboard.writeText(chatText);\n    handleMenuClose();\n  };\n  const handleClearChat = () => {\n    setChat([]);\n    handleMenuClose();\n  };\n  const handleFileUpload = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = event => {\n        // In a real app, you would send this to your backend for processing\n        setMessage(`Analyzing document: ${file.name}...`);\n      };\n      reader.readAsText(file);\n    }\n  };\n  const handleSuggestedQuery = query => {\n    setMessage(query);\n  };\n  const toggleSaveMessage = index => {\n    const updatedChat = [...chat];\n    updatedChat[index].saved = !updatedChat[index].saved;\n    setChat(updatedChat);\n\n    // Update saved messages list\n    if (updatedChat[index].saved) {\n      setSavedMessages([...savedMessages, updatedChat[index]]);\n    } else {\n      setSavedMessages(savedMessages.filter(msg => msg !== chat[index]));\n    }\n  };\n  const handleSend = async () => {\n    if (message.trim() === '') return;\n\n    // Add user message to chat\n    const userMessage = {\n      text: message,\n      sender: 'user',\n      timestamp: new Date()\n    };\n    setChat(prevChat => [...prevChat, userMessage]);\n    const userInput = message;\n    setMessage('');\n    setIsLoading(true);\n\n    // Track query start time\n    const startTime = new Date();\n    try {\n      // Send to backend API\n      const response = await processQuery(userInput);\n\n      // Extract citation references from the response\n      const citationRefs = extractCitationReferences(response);\n\n      // Enhance text with citation markers\n      const {\n        enhancedText,\n        citations\n      } = enhanceTextWithCitations(response, citationRefs);\n\n      // Add response to chat with citations\n      setChat(prevChat => [...prevChat, {\n        text: enhancedText,\n        sender: 'bot',\n        timestamps: new Date(),\n        citations: citations,\n        saved: false\n      }]);\n\n      // Track analytics data\n      trackQuery({\n        query: userInput,\n        responseTime: new Date() - startTime,\n        citationsCount: citations.length,\n        citationsSources: citations.map(c => `${c.actName}, Section ${c.sectionNumber}`),\n        timestamp: new Date().toISOString(),\n        queryLength: userInput.length,\n        category: detectQueryCategory(userInput)\n      });\n    } catch (error) {\n      console.error('Error processing message:', error);\n      setChat(prevChat => [...prevChat, {\n        text: 'Sorry, I encountered an error processing your request.',\n        sender: 'bot',\n        error: true,\n        timestamp: new Date()\n      }]);\n\n      // Track failed query\n      trackQuery({\n        query: userInput,\n        error: true,\n        timestamp: new Date().toISOString(),\n        responseTime: new Date() - startTime\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Simple function to detect query category based on keywords\n  const detectQueryCategory = query => {\n    const lowercaseQuery = query.toLowerCase();\n    if (lowercaseQuery.includes('divorce') || lowercaseQuery.includes('marriage') || lowercaseQuery.includes('custody') || lowercaseQuery.includes('alimony')) {\n      return 'Family Law';\n    } else if (lowercaseQuery.includes('property') || lowercaseQuery.includes('land') || lowercaseQuery.includes('rent') || lowercaseQuery.includes('tenant')) {\n      return 'Property Law';\n    } else if (lowercaseQuery.includes('theft') || lowercaseQuery.includes('murder') || lowercaseQuery.includes('bail') || lowercaseQuery.includes('police')) {\n      return 'Criminal Law';\n    } else if (lowercaseQuery.includes('constitution') || lowercaseQuery.includes('rights') || lowercaseQuery.includes('fundamental')) {\n      return 'Constitutional Law';\n    } else if (lowercaseQuery.includes('company') || lowercaseQuery.includes('business') || lowercaseQuery.includes('contract')) {\n      return 'Corporate Law';\n    } else if (lowercaseQuery.includes('refund') || lowercaseQuery.includes('product') || lowercaseQuery.includes('service') || lowercaseQuery.includes('warranty')) {\n      return 'Consumer Protection';\n    }\n    return 'General Legal';\n  };\n\n  // Recording functionality remains the same\n  const startRecording = () => {\n    console.log(\"Start recording\");\n    setIsRecording(true);\n  };\n  const stopRecording = () => {\n    console.log(\"Stop recording\");\n    setIsRecording(false);\n  };\n  const formatTime = date => {\n    return new Date(date).toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: 'calc(100vh - 64px)',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        borderBottom: 1,\n        borderColor: 'divider',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: \"Legal Assistant Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: showSuggestions ? \"Hide suggestions\" : \"Show suggestions\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: () => setShowSuggestions(!showSuggestions),\n            children: /*#__PURE__*/_jsxDEV(HelpOutlineIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleMenuOpen,\n          children: /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu, {\n        anchorEl: anchorEl,\n        open: Boolean(anchorEl),\n        onClose: handleMenuClose,\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleCopyChat,\n          children: [/*#__PURE__*/_jsxDEV(ContentCopyIcon, {\n            fontSize: \"small\",\n            sx: {\n              mr: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), \"Copy Chat\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleClearChat,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"error\",\n            children: \"Clear Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n      in: showSuggestions,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 1.5,\n          borderBottom: 1,\n          borderColor: 'divider',\n          transition: 'all 0.3s ease'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            mb: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            children: \"Suggested Legal Queries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            onClick: () => setShowAllQueries(!showAllQueries),\n            sx: {\n              minWidth: 'auto',\n              py: 0\n            },\n            children: showAllQueries ? 'Show Less' : 'More Categories'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 0.5\n          },\n          children: Object.keys(queriesByCategory).filter(category => showAllQueries || featuredCategories.includes(category)).map(category => /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              onClick: () => toggleCategory(category),\n              sx: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                cursor: 'pointer',\n                bgcolor: 'background.paper',\n                p: 0.5,\n                borderRadius: 1,\n                '&:hover': {\n                  bgcolor: 'action.hover'\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                fontWeight: \"medium\",\n                children: category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                children: expandedCategory === category ? '−' : '+'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n              in: expandedCategory === category,\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  flexWrap: 'wrap',\n                  gap: 0.5,\n                  p: 0.5,\n                  ml: 1\n                },\n                children: queriesByCategory[category].map((query, index) => /*#__PURE__*/_jsxDEV(Chip, {\n                  label: query,\n                  onClick: () => handleSuggestedQuery(query),\n                  clickable: true,\n                  variant: \"outlined\",\n                  size: \"small\",\n                  sx: {\n                    m: 0.2\n                  }\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 19\n            }, this)]\n          }, category, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        flexDirection: 'column',\n        flexGrow: 1,\n        overflow: 'auto',\n        p: 2,\n        gap: 2\n      },\n      children: [chat.map((msg, index) => /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignSelf: msg.sender === 'user' ? 'flex-end' : 'flex-start',\n          maxWidth: '80%',\n          position: 'relative'\n        },\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: msg.sender === 'user' ? 0 : 1,\n          sx: {\n            p: 2,\n            borderRadius: 2,\n            backgroundColor: msg.sender === 'user' ? theme.palette.primary.light : theme.palette.background.paper,\n            color: msg.sender === 'user' ? theme.palette.primary.contrastText : 'inherit',\n            border: msg.sender === 'user' ? 'none' : `1px solid ${theme.palette.divider}`\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: msg.sender === 'user' ? 'inherit' : 'text.secondary',\n              children: msg.sender === 'user' ? 'You' : 'Legal Assistant'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 17\n            }, this), msg.timestamp && /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: msg.sender === 'user' ? 'inherit' : 'text.secondary',\n              children: formatTime(msg.timestamp)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 15\n          }, this), msg.error && /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"error\",\n            variant: \"caption\",\n            sx: {\n              mt: 1,\n              display: 'block'\n            },\n            children: \"Please try reformulating your question.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 17\n          }, this), msg.citations && msg.citations.length > 0 && /*#__PURE__*/_jsxDEV(CitationDisplay, {\n            citations: msg.citations\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 17\n          }, this), msg.sender === 'bot' && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'flex-end',\n              mt: 1,\n              opacity: 0.7,\n              '&:hover': {\n                opacity: 1\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Copy response\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => navigator.clipboard.writeText(msg.text),\n                children: /*#__PURE__*/_jsxDEV(ContentCopyIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: msg.saved ? \"Unsave message\" : \"Save message\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => toggleSaveMessage(index),\n                color: msg.saved ? \"primary\" : \"default\",\n                children: msg.saved ? /*#__PURE__*/_jsxDEV(BookmarkIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 36\n                }, this) : /*#__PURE__*/_jsxDEV(BookmarkBorderIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 72\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 11\n      }, this)), isLoading && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 2,\n          alignSelf: 'flex-start'\n        },\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 1,\n          sx: {\n            p: 2,\n            borderRadius: 2,\n            display: 'flex',\n            alignItems: 'center',\n            gap: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: \"Processing your request...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        borderTop: 1,\n        borderColor: 'divider',\n        backgroundColor: theme.palette.background.paper\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          variant: \"outlined\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          placeholder: \"Type your legal question...\",\n          onKeyPress: e => e.key === 'Enter' && handleSend(),\n          InputProps: {\n            endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"end\",\n              children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Attach Document\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  edge: \"end\",\n                  onClick: () => {\n                    var _fileInputRef$current;\n                    return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                  },\n                  children: /*#__PURE__*/_jsxDEV(AttachFileIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 526,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                ref: fileInputRef,\n                style: {\n                  display: 'none'\n                },\n                accept: \".pdf,.doc,.docx,.txt\",\n                onChange: handleFileUpload\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 17\n            }, this)\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          color: isRecording ? \"secondary\" : \"primary\",\n          onClick: isRecording ? stopRecording : startRecording,\n          children: /*#__PURE__*/_jsxDEV(MicIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          endIcon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 22\n          }, this),\n          onClick: handleSend,\n          disabled: isLoading || message.trim() === '',\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          mt: 1,\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          color: \"text.secondary\",\n          sx: {\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(HelpOutlineIcon, {\n            fontSize: \"small\",\n            sx: {\n              mr: 0.5\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 13\n          }, this), \"Ask any legal question about Indian law\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Chip, {\n          label: \"AI Powered\",\n          size: \"small\",\n          color: \"primary\",\n          variant: \"outlined\",\n          sx: {\n            height: 24\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 283,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"vjputcVMzVEi/EFby5vTVIil0vM=\", false, function () {\n  return [useTheme, useLocation];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Box","TextField","Button","Typography","Paper","IconButton","CircularProgress","Chip","Menu","MenuItem","InputAdornment","Tooltip","Fade","Collapse","Divider","useTheme","SendIcon","MicIcon","MoreVertIcon","HelpOutlineIcon","ContentCopyIcon","BookmarkIcon","BookmarkBorderIcon","AttachFileIcon","useLocation","processLegalQuery","extractCitationReferences","enhanceTextWithCitations","CitationDisplay","trackQuery","jsxDEV","_jsxDEV","Chat","_s","message","setMessage","chat","setChat","isLoading","setIsLoading","isRecording","setIsRecording","anchorEl","setAnchorEl","expandedCategory","setExpandedCategory","showAllQueries","setShowAllQueries","savedMessages","setSavedMessages","showSuggestions","setShowSuggestions","chatEndRef","mediaRecorderRef","audioChunksRef","fileInputRef","theme","location","queriesByCategory","featuredCategories","toggleCategory","category","processQuery","text","error","console","_location$state","state","initialQuery","window","history","replaceState","document","title","_chatEndRef$current","current","scrollIntoView","behavior","handleMenuOpen","event","currentTarget","handleMenuClose","handleCopyChat","chatText","map","msg","sender","join","navigator","clipboard","writeText","handleClearChat","handleFileUpload","e","file","target","files","reader","FileReader","onload","name","readAsText","handleSuggestedQuery","query","toggleSaveMessage","index","updatedChat","saved","filter","handleSend","trim","userMessage","timestamp","Date","prevChat","userInput","startTime","response","citationRefs","enhancedText","citations","timestamps","responseTime","citationsCount","length","citationsSources","c","actName","sectionNumber","toISOString","queryLength","detectQueryCategory","lowercaseQuery","toLowerCase","includes","startRecording","log","stopRecording","formatTime","date","toLocaleTimeString","hour","minute","sx","display","flexDirection","height","position","children","p","borderBottom","borderColor","justifyContent","alignItems","variant","fileName","_jsxFileName","lineNumber","columnNumber","onClick","open","Boolean","onClose","fontSize","mr","color","in","transition","mb","size","minWidth","py","gap","Object","keys","cursor","bgcolor","borderRadius","fontWeight","flexWrap","ml","label","clickable","m","flexGrow","overflow","alignSelf","maxWidth","elevation","backgroundColor","palette","primary","light","background","paper","contrastText","border","divider","mt","opacity","ref","borderTop","fullWidth","value","onChange","placeholder","onKeyPress","key","InputProps","endAdornment","edge","_fileInputRef$current","click","type","style","accept","endIcon","disabled","_c","$RefreshReg$"],"sources":["D:/Legal Assistant for Indian Laws/client/src/components/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { \r\n  Box, \r\n  TextField, \r\n  Button, \r\n  Typography, \r\n  Paper, \r\n  IconButton,\r\n  CircularProgress,\r\n  Chip,\r\n  Menu,\r\n  MenuItem,\r\n  InputAdornment,\r\n  Tooltip,\r\n  Fade,\r\n  Collapse,\r\n  Divider,\r\n  useTheme\r\n} from '@mui/material';\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport MicIcon from '@mui/icons-material/Mic';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\r\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy';\r\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\r\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\r\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { processLegalQuery } from '../services/queryService';\r\nimport { extractCitationReferences, enhanceTextWithCitations } from '../services/citationService';\r\nimport CitationDisplay from './CitationDisplay';\r\nimport { trackQuery } from '../services/analyticsService';\r\n\r\nfunction Chat() {\r\n  const [message, setMessage] = useState('');\r\n  const [chat, setChat] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [expandedCategory, setExpandedCategory] = useState(null);\r\n  const [showAllQueries, setShowAllQueries] = useState(false);\r\n  const [savedMessages, setSavedMessages] = useState([]);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const chatEndRef = useRef(null);\r\n  const mediaRecorderRef = useRef(null);\r\n  const audioChunksRef = useRef([]);\r\n  const fileInputRef = useRef(null);\r\n  const theme = useTheme();\r\n  const location = useLocation();\r\n  \r\n  // Organize queries by category\r\n  const queriesByCategory = {\r\n    'Family Law': [\r\n      \"What are the grounds for divorce in India?\",\r\n      \"How can I apply for child custody in India?\",\r\n      \"What is the procedure for legal adoption in India?\",\r\n      \"Explain the Hindu Marriage Act provisions\",\r\n      \"Muslim personal law on marriage and divorce\",\r\n      \"How are maintenance and alimony calculated?\",\r\n    ],\r\n    'Property Law': [\r\n      \"Explain property inheritance laws in India\",\r\n      \"What are my tenant rights under Rent Control Act?\",\r\n      \"How to transfer property ownership after death?\",\r\n      \"Legal procedure for property registration in India\",\r\n      \"What is RERA Act and how does it protect homebuyers?\",\r\n    ],\r\n    'Criminal Law': [\r\n      \"What is the process for filing an FIR?\",\r\n      \"What are my rights if arrested in India?\",\r\n      \"Explain the bail process in criminal cases\",\r\n      \"What constitutes defamation under Indian law?\",\r\n      \"Penalties for cybercrime in India\",\r\n    ],\r\n    'Consumer Protection': [\r\n      \"Consumer rights under Consumer Protection Act\",\r\n      \"How to file a consumer complaint against a company?\",\r\n      \"What remedies are available for defective products?\",\r\n      \"E-commerce return policy regulations in India\",\r\n    ],\r\n    'Constitutional Rights': [\r\n      \"What are my fundamental rights under the Constitution?\",\r\n      \"Right to Information (RTI) filing procedure\",\r\n      \"Public Interest Litigation (PIL) guidelines\",\r\n    ],\r\n    'Other Legal Topics': [\r\n      \"How to register a startup in India?\",\r\n      \"Procedure for making a legally valid Will\",\r\n      \"How to apply for legal aid in India?\",\r\n      \"Medical negligence claims in India\",\r\n    ]\r\n  };\r\n\r\n  // Get featured categories to display when not showing all\r\n  const featuredCategories = ['Family Law', 'Criminal Law', 'Consumer Protection'];\r\n  \r\n  const toggleCategory = (category) => {\r\n    if (expandedCategory === category) {\r\n      setExpandedCategory(null);\r\n    } else {\r\n      setExpandedCategory(category);\r\n    }\r\n  };\r\n\r\n  // Process the query\r\n  const processQuery = useCallback(async (text) => {\r\n    try {\r\n      return await processLegalQuery(text);\r\n    } catch (error) {\r\n      console.error(\"Error in process query:\", error);\r\n      throw error;\r\n    }\r\n  }, []);\r\n\r\n  // Handle initial query from navigation state\r\n  useEffect(() => {\r\n    if (location.state?.initialQuery) {\r\n      const initialQuery = location.state.initialQuery;\r\n      // Set message instead of sending it immediately to give user control\r\n      setMessage(initialQuery);\r\n      // Clean up navigation state\r\n      window.history.replaceState({}, document.title);\r\n    }\r\n  }, [location.state]);\r\n\r\n  // Scroll to bottom of chat\r\n  useEffect(() => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [chat]);\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleCopyChat = () => {\r\n    const chatText = chat.map(msg => `${msg.sender === 'user' ? 'You' : 'Legal Assistant'}: ${msg.text}`).join('\\n\\n');\r\n    navigator.clipboard.writeText(chatText);\r\n    handleMenuClose();\r\n  };\r\n\r\n  const handleClearChat = () => {\r\n    setChat([]);\r\n    handleMenuClose();\r\n  };\r\n\r\n  const handleFileUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        // In a real app, you would send this to your backend for processing\r\n        setMessage(`Analyzing document: ${file.name}...`);\r\n      };\r\n      reader.readAsText(file);\r\n    }\r\n  };\r\n\r\n  const handleSuggestedQuery = (query) => {\r\n    setMessage(query);\r\n  };\r\n\r\n  const toggleSaveMessage = (index) => {\r\n    const updatedChat = [...chat];\r\n    updatedChat[index].saved = !updatedChat[index].saved;\r\n    setChat(updatedChat);\r\n    \r\n    // Update saved messages list\r\n    if (updatedChat[index].saved) {\r\n      setSavedMessages([...savedMessages, updatedChat[index]]);\r\n    } else {\r\n      setSavedMessages(savedMessages.filter(msg => msg !== chat[index]));\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if (message.trim() === '') return;\r\n    \r\n    // Add user message to chat\r\n    const userMessage = { text: message, sender: 'user', timestamp: new Date() };\r\n    setChat(prevChat => [...prevChat, userMessage]);\r\n    const userInput = message;\r\n    setMessage('');\r\n    setIsLoading(true);\r\n    \r\n    // Track query start time\r\n    const startTime = new Date();\r\n    \r\n    try {\r\n      // Send to backend API\r\n      const response = await processQuery(userInput);\r\n      \r\n      // Extract citation references from the response\r\n      const citationRefs = extractCitationReferences(response);\r\n      \r\n      // Enhance text with citation markers\r\n      const { enhancedText, citations } = enhanceTextWithCitations(response, citationRefs);\r\n      \r\n      // Add response to chat with citations\r\n      setChat(prevChat => [...prevChat, { \r\n        text: enhancedText, \r\n        sender: 'bot',\r\n        timestamps: new Date(),\r\n        citations: citations,\r\n        saved: false\r\n      }]);\r\n      \r\n      // Track analytics data\r\n      trackQuery({\r\n        query: userInput,\r\n        responseTime: new Date() - startTime,\r\n        citationsCount: citations.length,\r\n        citationsSources: citations.map(c => `${c.actName}, Section ${c.sectionNumber}`),\r\n        timestamp: new Date().toISOString(),\r\n        queryLength: userInput.length,\r\n        category: detectQueryCategory(userInput)\r\n      });\r\n    } catch (error) {\r\n      console.error('Error processing message:', error);\r\n      setChat(prevChat => [...prevChat, { \r\n        text: 'Sorry, I encountered an error processing your request.', \r\n        sender: 'bot',\r\n        error: true,\r\n        timestamp: new Date()\r\n      }]);\r\n      \r\n      // Track failed query\r\n      trackQuery({\r\n        query: userInput,\r\n        error: true,\r\n        timestamp: new Date().toISOString(),\r\n        responseTime: new Date() - startTime\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  // Simple function to detect query category based on keywords\r\n  const detectQueryCategory = (query) => {\r\n    const lowercaseQuery = query.toLowerCase();\r\n    if (lowercaseQuery.includes('divorce') || lowercaseQuery.includes('marriage') || \r\n        lowercaseQuery.includes('custody') || lowercaseQuery.includes('alimony')) {\r\n      return 'Family Law';\r\n    } else if (lowercaseQuery.includes('property') || lowercaseQuery.includes('land') || \r\n               lowercaseQuery.includes('rent') || lowercaseQuery.includes('tenant')) {\r\n      return 'Property Law';\r\n    } else if (lowercaseQuery.includes('theft') || lowercaseQuery.includes('murder') || \r\n               lowercaseQuery.includes('bail') || lowercaseQuery.includes('police')) {\r\n      return 'Criminal Law';\r\n    } else if (lowercaseQuery.includes('constitution') || lowercaseQuery.includes('rights') || \r\n               lowercaseQuery.includes('fundamental')) {\r\n      return 'Constitutional Law';\r\n    } else if (lowercaseQuery.includes('company') || lowercaseQuery.includes('business') || \r\n               lowercaseQuery.includes('contract')) {\r\n      return 'Corporate Law';\r\n    } else if (lowercaseQuery.includes('refund') || lowercaseQuery.includes('product') || \r\n               lowercaseQuery.includes('service') || lowercaseQuery.includes('warranty')) {\r\n      return 'Consumer Protection';\r\n    }\r\n    return 'General Legal';\r\n  };\r\n  \r\n  // Recording functionality remains the same\r\n  const startRecording = () => {\r\n    console.log(\"Start recording\");\r\n    setIsRecording(true);\r\n  };\r\n  \r\n  const stopRecording = () => {\r\n    console.log(\"Stop recording\");\r\n    setIsRecording(false);\r\n  };\r\n\r\n  const formatTime = (date) => {\r\n    return new Date(date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ \r\n      display: 'flex', \r\n      flexDirection: 'column', \r\n      height: 'calc(100vh - 64px)',\r\n      position: 'relative'\r\n    }}>\r\n      {/* Chat header */}\r\n      <Box sx={{ \r\n        p: 2, \r\n        borderBottom: 1, \r\n        borderColor: 'divider', \r\n        display: 'flex', \r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <Typography variant=\"h6\">Legal Assistant Chat</Typography>\r\n        <Box sx={{ display: 'flex' }}>\r\n          {/* Added suggestion toggle button */}\r\n          <Tooltip title={showSuggestions ? \"Hide suggestions\" : \"Show suggestions\"}>\r\n            <IconButton onClick={() => setShowSuggestions(!showSuggestions)}>\r\n              <HelpOutlineIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n          <IconButton onClick={handleMenuOpen}>\r\n            <MoreVertIcon />\r\n          </IconButton>\r\n        </Box>\r\n        <Menu\r\n          anchorEl={anchorEl}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleMenuClose}\r\n        >\r\n          <MenuItem onClick={handleCopyChat}>\r\n            <ContentCopyIcon fontSize=\"small\" sx={{ mr: 1 }} />\r\n            Copy Chat\r\n          </MenuItem>\r\n          <MenuItem onClick={handleClearChat}>\r\n            <Typography color=\"error\">Clear Chat</Typography>\r\n          </MenuItem>\r\n        </Menu>\r\n      </Box>\r\n      \r\n      {/* Suggested queries - now fully collapsible */}\r\n      <Collapse in={showSuggestions}>\r\n        <Box sx={{ \r\n          p: 1.5,\r\n          borderBottom: 1,\r\n          borderColor: 'divider',\r\n          transition: 'all 0.3s ease'\r\n        }}>\r\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\r\n            <Typography variant=\"subtitle2\">Suggested Legal Queries</Typography>\r\n            <Button \r\n              size=\"small\" \r\n              onClick={() => setShowAllQueries(!showAllQueries)}\r\n              sx={{ minWidth: 'auto', py: 0 }}\r\n            >\r\n              {showAllQueries ? 'Show Less' : 'More Categories'}\r\n            </Button>\r\n          </Box>\r\n          \r\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 0.5 }}>\r\n            {Object.keys(queriesByCategory)\r\n              .filter(category => showAllQueries || featuredCategories.includes(category))\r\n              .map((category) => (\r\n                <Box key={category}>\r\n                  <Box \r\n                    onClick={() => toggleCategory(category)}\r\n                    sx={{ \r\n                      display: 'flex', \r\n                      justifyContent: 'space-between', \r\n                      alignItems: 'center',\r\n                      cursor: 'pointer',\r\n                      bgcolor: 'background.paper',\r\n                      p: 0.5,\r\n                      borderRadius: 1,\r\n                      '&:hover': { bgcolor: 'action.hover' }\r\n                    }}\r\n                  >\r\n                    <Typography variant=\"body2\" fontWeight=\"medium\">{category}</Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      {expandedCategory === category ? '−' : '+'}\r\n                    </Typography>\r\n                  </Box>\r\n                  \r\n                  <Collapse in={expandedCategory === category}>\r\n                    <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, p: 0.5, ml: 1 }}>\r\n                      {queriesByCategory[category].map((query, index) => (\r\n                        <Chip \r\n                          key={index} \r\n                          label={query} \r\n                          onClick={() => handleSuggestedQuery(query)} \r\n                          clickable \r\n                          variant=\"outlined\"\r\n                          size=\"small\"\r\n                          sx={{ m: 0.2 }}\r\n                        />\r\n                      ))}\r\n                    </Box>\r\n                  </Collapse>\r\n                </Box>\r\n            ))}\r\n          </Box>\r\n        </Box>\r\n      </Collapse>\r\n\r\n      {/* Chat messages display */}\r\n      <Box sx={{ \r\n        display: 'flex', \r\n        flexDirection: 'column', \r\n        flexGrow: 1, \r\n        overflow: 'auto',\r\n        p: 2,\r\n        gap: 2\r\n      }}>\r\n        {chat.map((msg, index) => (\r\n          <Box \r\n            key={index} \r\n            sx={{ \r\n              display: 'flex', \r\n              flexDirection: 'column',\r\n              alignSelf: msg.sender === 'user' ? 'flex-end' : 'flex-start',\r\n              maxWidth: '80%',\r\n              position: 'relative'\r\n            }}\r\n          >\r\n            <Paper \r\n              elevation={msg.sender === 'user' ? 0 : 1}\r\n              sx={{ \r\n                p: 2,\r\n                borderRadius: 2,\r\n                backgroundColor: msg.sender === 'user' \r\n                  ? theme.palette.primary.light \r\n                  : theme.palette.background.paper,\r\n                color: msg.sender === 'user' ? theme.palette.primary.contrastText : 'inherit',\r\n                border: msg.sender === 'user' ? 'none' : `1px solid ${theme.palette.divider}`\r\n              }}\r\n            >\r\n              {/* Message header */}\r\n              <Box sx={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between', \r\n                alignItems: 'center', \r\n                mb: 1 \r\n              }}>\r\n                <Typography variant=\"caption\" color={msg.sender === 'user' ? 'inherit' : 'text.secondary'}>\r\n                  {msg.sender === 'user' ? 'You' : 'Legal Assistant'}\r\n                </Typography>\r\n                {msg.timestamp && (\r\n                  <Typography variant=\"caption\" color={msg.sender === 'user' ? 'inherit' : 'text.secondary'}>\r\n                    {formatTime(msg.timestamp)}\r\n                  </Typography>\r\n                )}\r\n              </Box>\r\n              \r\n              <Typography variant=\"body1\">{msg.text}</Typography>\r\n              \r\n              {msg.error && (\r\n                <Typography color=\"error\" variant=\"caption\" sx={{ mt: 1, display: 'block' }}>\r\n                  Please try reformulating your question.\r\n                </Typography>\r\n              )}\r\n              \r\n              {msg.citations && msg.citations.length > 0 && (\r\n                <CitationDisplay citations={msg.citations} />\r\n              )}\r\n              \r\n              {/* Message actions */}\r\n              {msg.sender === 'bot' && (\r\n                <Box sx={{ \r\n                  display: 'flex', \r\n                  justifyContent: 'flex-end', \r\n                  mt: 1,\r\n                  opacity: 0.7,\r\n                  '&:hover': { opacity: 1 }\r\n                }}>\r\n                  <Tooltip title=\"Copy response\">\r\n                    <IconButton \r\n                      size=\"small\" \r\n                      onClick={() => navigator.clipboard.writeText(msg.text)}\r\n                    >\r\n                      <ContentCopyIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <Tooltip title={msg.saved ? \"Unsave message\" : \"Save message\"}>\r\n                    <IconButton \r\n                      size=\"small\" \r\n                      onClick={() => toggleSaveMessage(index)}\r\n                      color={msg.saved ? \"primary\" : \"default\"}\r\n                    >\r\n                      {msg.saved ? <BookmarkIcon fontSize=\"small\" /> : <BookmarkBorderIcon fontSize=\"small\" />}\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </Box>\r\n              )}\r\n            </Paper>\r\n          </Box>\r\n        ))}\r\n        \r\n        {isLoading && (\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, alignSelf: 'flex-start' }}>\r\n            <Paper \r\n              elevation={1}\r\n              sx={{ \r\n                p: 2,\r\n                borderRadius: 2,\r\n                display: 'flex', \r\n                alignItems: 'center', \r\n                gap: 2\r\n              }}\r\n            >\r\n              <CircularProgress size={20} />\r\n              <Typography>Processing your request...</Typography>\r\n            </Paper>\r\n          </Box>\r\n        )}\r\n        \r\n        <div ref={chatEndRef} />\r\n      </Box>\r\n      \r\n      {/* Input area */}\r\n      <Box sx={{ \r\n        p: 2, \r\n        borderTop: 1, \r\n        borderColor: 'divider', \r\n        backgroundColor: theme.palette.background.paper\r\n      }}>\r\n        <Box sx={{ display: 'flex', gap: 1 }}>\r\n          <TextField\r\n            fullWidth\r\n            variant=\"outlined\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            placeholder=\"Type your legal question...\"\r\n            onKeyPress={(e) => e.key === 'Enter' && handleSend()}\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <Tooltip title=\"Attach Document\">\r\n                    <IconButton \r\n                      edge=\"end\" \r\n                      onClick={() => fileInputRef.current?.click()}\r\n                    >\r\n                      <AttachFileIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <input\r\n                    type=\"file\"\r\n                    ref={fileInputRef}\r\n                    style={{ display: 'none' }}\r\n                    accept=\".pdf,.doc,.docx,.txt\"\r\n                    onChange={handleFileUpload}\r\n                  />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n          <IconButton \r\n            color={isRecording ? \"secondary\" : \"primary\"}\r\n            onClick={isRecording ? stopRecording : startRecording}\r\n          >\r\n            <MicIcon />\r\n          </IconButton>\r\n          <Button \r\n            variant=\"contained\" \r\n            endIcon={<SendIcon />} \r\n            onClick={handleSend}\r\n            disabled={isLoading || message.trim() === ''}\r\n          >\r\n            Send\r\n          </Button>\r\n        </Box>\r\n        \r\n        <Box sx={{ display: 'flex', alignItems: 'center', mt: 1, justifyContent: 'space-between' }}>\r\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center' }}>\r\n            <HelpOutlineIcon fontSize=\"small\" sx={{ mr: 0.5 }} />\r\n            Ask any legal question about Indian law\r\n          </Typography>\r\n          <Chip \r\n            label=\"AI Powered\" \r\n            size=\"small\" \r\n            color=\"primary\" \r\n            variant=\"outlined\" \r\n            sx={{ height: 24 }}\r\n          />\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Chat;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AACvE,SACEC,GAAG,EACHC,SAAS,EACTC,MAAM,EACNC,UAAU,EACVC,KAAK,EACLC,UAAU,EACVC,gBAAgB,EAChBC,IAAI,EACJC,IAAI,EACJC,QAAQ,EACRC,cAAc,EACdC,OAAO,EACPC,IAAI,EACJC,QAAQ,EACRC,OAAO,EACPC,QAAQ,QACH,eAAe;AACtB,OAAOC,QAAQ,MAAM,0BAA0B;AAC/C,OAAOC,OAAO,MAAM,yBAAyB;AAC7C,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,eAAe,MAAM,iCAAiC;AAC7D,OAAOC,eAAe,MAAM,iCAAiC;AAC7D,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,kBAAkB,MAAM,oCAAoC;AACnE,OAAOC,cAAc,MAAM,gCAAgC;AAC3D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,iBAAiB,QAAQ,0BAA0B;AAC5D,SAASC,yBAAyB,EAAEC,wBAAwB,QAAQ,6BAA6B;AACjG,OAAOC,eAAe,MAAM,mBAAmB;AAC/C,SAASC,UAAU,QAAQ,8BAA8B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1D,SAASC,IAAIA,CAAA,EAAG;EAAAC,EAAA;EACd,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGvC,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACwC,IAAI,EAAEC,OAAO,CAAC,GAAGzC,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAAC0C,SAAS,EAAEC,YAAY,CAAC,GAAG3C,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC4C,WAAW,EAAEC,cAAc,CAAC,GAAG7C,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC8C,QAAQ,EAAEC,WAAW,CAAC,GAAG/C,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACgD,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGjD,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM,CAACkD,cAAc,EAAEC,iBAAiB,CAAC,GAAGnD,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACoD,aAAa,EAAEC,gBAAgB,CAAC,GAAGrD,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACsD,eAAe,EAAEC,kBAAkB,CAAC,GAAGvD,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAMwD,UAAU,GAAGtD,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAMuD,gBAAgB,GAAGvD,MAAM,CAAC,IAAI,CAAC;EACrC,MAAMwD,cAAc,GAAGxD,MAAM,CAAC,EAAE,CAAC;EACjC,MAAMyD,YAAY,GAAGzD,MAAM,CAAC,IAAI,CAAC;EACjC,MAAM0D,KAAK,GAAGzC,QAAQ,CAAC,CAAC;EACxB,MAAM0C,QAAQ,GAAGjC,WAAW,CAAC,CAAC;;EAE9B;EACA,MAAMkC,iBAAiB,GAAG;IACxB,YAAY,EAAE,CACZ,4CAA4C,EAC5C,6CAA6C,EAC7C,oDAAoD,EACpD,2CAA2C,EAC3C,6CAA6C,EAC7C,6CAA6C,CAC9C;IACD,cAAc,EAAE,CACd,4CAA4C,EAC5C,mDAAmD,EACnD,iDAAiD,EACjD,oDAAoD,EACpD,sDAAsD,CACvD;IACD,cAAc,EAAE,CACd,wCAAwC,EACxC,0CAA0C,EAC1C,4CAA4C,EAC5C,+CAA+C,EAC/C,mCAAmC,CACpC;IACD,qBAAqB,EAAE,CACrB,+CAA+C,EAC/C,qDAAqD,EACrD,qDAAqD,EACrD,+CAA+C,CAChD;IACD,uBAAuB,EAAE,CACvB,wDAAwD,EACxD,6CAA6C,EAC7C,6CAA6C,CAC9C;IACD,oBAAoB,EAAE,CACpB,qCAAqC,EACrC,2CAA2C,EAC3C,sCAAsC,EACtC,oCAAoC;EAExC,CAAC;;EAED;EACA,MAAMC,kBAAkB,GAAG,CAAC,YAAY,EAAE,cAAc,EAAE,qBAAqB,CAAC;EAEhF,MAAMC,cAAc,GAAIC,QAAQ,IAAK;IACnC,IAAIjB,gBAAgB,KAAKiB,QAAQ,EAAE;MACjChB,mBAAmB,CAAC,IAAI,CAAC;IAC3B,CAAC,MAAM;MACLA,mBAAmB,CAACgB,QAAQ,CAAC;IAC/B;EACF,CAAC;;EAED;EACA,MAAMC,YAAY,GAAG/D,WAAW,CAAC,MAAOgE,IAAI,IAAK;IAC/C,IAAI;MACF,OAAO,MAAMtC,iBAAiB,CAACsC,IAAI,CAAC;IACtC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,MAAMA,KAAK;IACb;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAnE,SAAS,CAAC,MAAM;IAAA,IAAAqE,eAAA;IACd,KAAAA,eAAA,GAAIT,QAAQ,CAACU,KAAK,cAAAD,eAAA,eAAdA,eAAA,CAAgBE,YAAY,EAAE;MAChC,MAAMA,YAAY,GAAGX,QAAQ,CAACU,KAAK,CAACC,YAAY;MAChD;MACAjC,UAAU,CAACiC,YAAY,CAAC;MACxB;MACAC,MAAM,CAACC,OAAO,CAACC,YAAY,CAAC,CAAC,CAAC,EAAEC,QAAQ,CAACC,KAAK,CAAC;IACjD;EACF,CAAC,EAAE,CAAChB,QAAQ,CAACU,KAAK,CAAC,CAAC;;EAEpB;EACAtE,SAAS,CAAC,MAAM;IAAA,IAAA6E,mBAAA;IACd,CAAAA,mBAAA,GAAAtB,UAAU,CAACuB,OAAO,cAAAD,mBAAA,uBAAlBA,mBAAA,CAAoBE,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAC5D,CAAC,EAAE,CAACzC,IAAI,CAAC,CAAC;EAEV,MAAM0C,cAAc,GAAIC,KAAK,IAAK;IAChCpC,WAAW,CAACoC,KAAK,CAACC,aAAa,CAAC;EAClC,CAAC;EAED,MAAMC,eAAe,GAAGA,CAAA,KAAM;IAC5BtC,WAAW,CAAC,IAAI,CAAC;EACnB,CAAC;EAED,MAAMuC,cAAc,GAAGA,CAAA,KAAM;IAC3B,MAAMC,QAAQ,GAAG/C,IAAI,CAACgD,GAAG,CAACC,GAAG,IAAI,GAAGA,GAAG,CAACC,MAAM,KAAK,MAAM,GAAG,KAAK,GAAG,iBAAiB,KAAKD,GAAG,CAACtB,IAAI,EAAE,CAAC,CAACwB,IAAI,CAAC,MAAM,CAAC;IAClHC,SAAS,CAACC,SAAS,CAACC,SAAS,CAACP,QAAQ,CAAC;IACvCF,eAAe,CAAC,CAAC;EACnB,CAAC;EAED,MAAMU,eAAe,GAAGA,CAAA,KAAM;IAC5BtD,OAAO,CAAC,EAAE,CAAC;IACX4C,eAAe,CAAC,CAAC;EACnB,CAAC;EAED,MAAMW,gBAAgB,GAAIC,CAAC,IAAK;IAC9B,MAAMC,IAAI,GAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAC9B,IAAIF,IAAI,EAAE;MACR,MAAMG,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAIpB,KAAK,IAAK;QACzB;QACA5C,UAAU,CAAC,uBAAuB2D,IAAI,CAACM,IAAI,KAAK,CAAC;MACnD,CAAC;MACDH,MAAM,CAACI,UAAU,CAACP,IAAI,CAAC;IACzB;EACF,CAAC;EAED,MAAMQ,oBAAoB,GAAIC,KAAK,IAAK;IACtCpE,UAAU,CAACoE,KAAK,CAAC;EACnB,CAAC;EAED,MAAMC,iBAAiB,GAAIC,KAAK,IAAK;IACnC,MAAMC,WAAW,GAAG,CAAC,GAAGtE,IAAI,CAAC;IAC7BsE,WAAW,CAACD,KAAK,CAAC,CAACE,KAAK,GAAG,CAACD,WAAW,CAACD,KAAK,CAAC,CAACE,KAAK;IACpDtE,OAAO,CAACqE,WAAW,CAAC;;IAEpB;IACA,IAAIA,WAAW,CAACD,KAAK,CAAC,CAACE,KAAK,EAAE;MAC5B1D,gBAAgB,CAAC,CAAC,GAAGD,aAAa,EAAE0D,WAAW,CAACD,KAAK,CAAC,CAAC,CAAC;IAC1D,CAAC,MAAM;MACLxD,gBAAgB,CAACD,aAAa,CAAC4D,MAAM,CAACvB,GAAG,IAAIA,GAAG,KAAKjD,IAAI,CAACqE,KAAK,CAAC,CAAC,CAAC;IACpE;EACF,CAAC;EAED,MAAMI,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI3E,OAAO,CAAC4E,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;;IAE3B;IACA,MAAMC,WAAW,GAAG;MAAEhD,IAAI,EAAE7B,OAAO;MAAEoD,MAAM,EAAE,MAAM;MAAE0B,SAAS,EAAE,IAAIC,IAAI,CAAC;IAAE,CAAC;IAC5E5E,OAAO,CAAC6E,QAAQ,IAAI,CAAC,GAAGA,QAAQ,EAAEH,WAAW,CAAC,CAAC;IAC/C,MAAMI,SAAS,GAAGjF,OAAO;IACzBC,UAAU,CAAC,EAAE,CAAC;IACdI,YAAY,CAAC,IAAI,CAAC;;IAElB;IACA,MAAM6E,SAAS,GAAG,IAAIH,IAAI,CAAC,CAAC;IAE5B,IAAI;MACF;MACA,MAAMI,QAAQ,GAAG,MAAMvD,YAAY,CAACqD,SAAS,CAAC;;MAE9C;MACA,MAAMG,YAAY,GAAG5F,yBAAyB,CAAC2F,QAAQ,CAAC;;MAExD;MACA,MAAM;QAAEE,YAAY;QAAEC;MAAU,CAAC,GAAG7F,wBAAwB,CAAC0F,QAAQ,EAAEC,YAAY,CAAC;;MAEpF;MACAjF,OAAO,CAAC6E,QAAQ,IAAI,CAAC,GAAGA,QAAQ,EAAE;QAChCnD,IAAI,EAAEwD,YAAY;QAClBjC,MAAM,EAAE,KAAK;QACbmC,UAAU,EAAE,IAAIR,IAAI,CAAC,CAAC;QACtBO,SAAS,EAAEA,SAAS;QACpBb,KAAK,EAAE;MACT,CAAC,CAAC,CAAC;;MAEH;MACA9E,UAAU,CAAC;QACT0E,KAAK,EAAEY,SAAS;QAChBO,YAAY,EAAE,IAAIT,IAAI,CAAC,CAAC,GAAGG,SAAS;QACpCO,cAAc,EAAEH,SAAS,CAACI,MAAM;QAChCC,gBAAgB,EAAEL,SAAS,CAACpC,GAAG,CAAC0C,CAAC,IAAI,GAAGA,CAAC,CAACC,OAAO,aAAaD,CAAC,CAACE,aAAa,EAAE,CAAC;QAChFhB,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACgB,WAAW,CAAC,CAAC;QACnCC,WAAW,EAAEf,SAAS,CAACS,MAAM;QAC7B/D,QAAQ,EAAEsE,mBAAmB,CAAChB,SAAS;MACzC,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOnD,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD3B,OAAO,CAAC6E,QAAQ,IAAI,CAAC,GAAGA,QAAQ,EAAE;QAChCnD,IAAI,EAAE,wDAAwD;QAC9DuB,MAAM,EAAE,KAAK;QACbtB,KAAK,EAAE,IAAI;QACXgD,SAAS,EAAE,IAAIC,IAAI,CAAC;MACtB,CAAC,CAAC,CAAC;;MAEH;MACApF,UAAU,CAAC;QACT0E,KAAK,EAAEY,SAAS;QAChBnD,KAAK,EAAE,IAAI;QACXgD,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACgB,WAAW,CAAC,CAAC;QACnCP,YAAY,EAAE,IAAIT,IAAI,CAAC,CAAC,GAAGG;MAC7B,CAAC,CAAC;IACJ,CAAC,SAAS;MACR7E,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;;EAED;EACA,MAAM4F,mBAAmB,GAAI5B,KAAK,IAAK;IACrC,MAAM6B,cAAc,GAAG7B,KAAK,CAAC8B,WAAW,CAAC,CAAC;IAC1C,IAAID,cAAc,CAACE,QAAQ,CAAC,SAAS,CAAC,IAAIF,cAAc,CAACE,QAAQ,CAAC,UAAU,CAAC,IACzEF,cAAc,CAACE,QAAQ,CAAC,SAAS,CAAC,IAAIF,cAAc,CAACE,QAAQ,CAAC,SAAS,CAAC,EAAE;MAC5E,OAAO,YAAY;IACrB,CAAC,MAAM,IAAIF,cAAc,CAACE,QAAQ,CAAC,UAAU,CAAC,IAAIF,cAAc,CAACE,QAAQ,CAAC,MAAM,CAAC,IACtEF,cAAc,CAACE,QAAQ,CAAC,MAAM,CAAC,IAAIF,cAAc,CAACE,QAAQ,CAAC,QAAQ,CAAC,EAAE;MAC/E,OAAO,cAAc;IACvB,CAAC,MAAM,IAAIF,cAAc,CAACE,QAAQ,CAAC,OAAO,CAAC,IAAIF,cAAc,CAACE,QAAQ,CAAC,QAAQ,CAAC,IACrEF,cAAc,CAACE,QAAQ,CAAC,MAAM,CAAC,IAAIF,cAAc,CAACE,QAAQ,CAAC,QAAQ,CAAC,EAAE;MAC/E,OAAO,cAAc;IACvB,CAAC,MAAM,IAAIF,cAAc,CAACE,QAAQ,CAAC,cAAc,CAAC,IAAIF,cAAc,CAACE,QAAQ,CAAC,QAAQ,CAAC,IAC5EF,cAAc,CAACE,QAAQ,CAAC,aAAa,CAAC,EAAE;MACjD,OAAO,oBAAoB;IAC7B,CAAC,MAAM,IAAIF,cAAc,CAACE,QAAQ,CAAC,SAAS,CAAC,IAAIF,cAAc,CAACE,QAAQ,CAAC,UAAU,CAAC,IACzEF,cAAc,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAE;MAC9C,OAAO,eAAe;IACxB,CAAC,MAAM,IAAIF,cAAc,CAACE,QAAQ,CAAC,QAAQ,CAAC,IAAIF,cAAc,CAACE,QAAQ,CAAC,SAAS,CAAC,IACvEF,cAAc,CAACE,QAAQ,CAAC,SAAS,CAAC,IAAIF,cAAc,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAE;MACpF,OAAO,qBAAqB;IAC9B;IACA,OAAO,eAAe;EACxB,CAAC;;EAED;EACA,MAAMC,cAAc,GAAGA,CAAA,KAAM;IAC3BtE,OAAO,CAACuE,GAAG,CAAC,iBAAiB,CAAC;IAC9B/F,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAMgG,aAAa,GAAGA,CAAA,KAAM;IAC1BxE,OAAO,CAACuE,GAAG,CAAC,gBAAgB,CAAC;IAC7B/F,cAAc,CAAC,KAAK,CAAC;EACvB,CAAC;EAED,MAAMiG,UAAU,GAAIC,IAAI,IAAK;IAC3B,OAAO,IAAI1B,IAAI,CAAC0B,IAAI,CAAC,CAACC,kBAAkB,CAAC,EAAE,EAAE;MAAEC,IAAI,EAAE,SAAS;MAAEC,MAAM,EAAE;IAAU,CAAC,CAAC;EACtF,CAAC;EAED,oBACE/G,OAAA,CAAC/B,GAAG;IAAC+I,EAAE,EAAE;MACPC,OAAO,EAAE,MAAM;MACfC,aAAa,EAAE,QAAQ;MACvBC,MAAM,EAAE,oBAAoB;MAC5BC,QAAQ,EAAE;IACZ,CAAE;IAAAC,QAAA,gBAEArH,OAAA,CAAC/B,GAAG;MAAC+I,EAAE,EAAE;QACPM,CAAC,EAAE,CAAC;QACJC,YAAY,EAAE,CAAC;QACfC,WAAW,EAAE,SAAS;QACtBP,OAAO,EAAE,MAAM;QACfQ,cAAc,EAAE,eAAe;QAC/BC,UAAU,EAAE;MACd,CAAE;MAAAL,QAAA,gBACArH,OAAA,CAAC5B,UAAU;QAACuJ,OAAO,EAAC,IAAI;QAAAN,QAAA,EAAC;MAAoB;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,eAC1D/H,OAAA,CAAC/B,GAAG;QAAC+I,EAAE,EAAE;UAAEC,OAAO,EAAE;QAAO,CAAE;QAAAI,QAAA,gBAE3BrH,OAAA,CAACpB,OAAO;UAAC8D,KAAK,EAAEvB,eAAe,GAAG,kBAAkB,GAAG,kBAAmB;UAAAkG,QAAA,eACxErH,OAAA,CAAC1B,UAAU;YAAC0J,OAAO,EAAEA,CAAA,KAAM5G,kBAAkB,CAAC,CAACD,eAAe,CAAE;YAAAkG,QAAA,eAC9DrH,OAAA,CAACZ,eAAe;cAAAwI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACV/H,OAAA,CAAC1B,UAAU;UAAC0J,OAAO,EAAEjF,cAAe;UAAAsE,QAAA,eAClCrH,OAAA,CAACb,YAAY;YAAAyI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CAAC,eACN/H,OAAA,CAACvB,IAAI;QACHkC,QAAQ,EAAEA,QAAS;QACnBsH,IAAI,EAAEC,OAAO,CAACvH,QAAQ,CAAE;QACxBwH,OAAO,EAAEjF,eAAgB;QAAAmE,QAAA,gBAEzBrH,OAAA,CAACtB,QAAQ;UAACsJ,OAAO,EAAE7E,cAAe;UAAAkE,QAAA,gBAChCrH,OAAA,CAACX,eAAe;YAAC+I,QAAQ,EAAC,OAAO;YAACpB,EAAE,EAAE;cAAEqB,EAAE,EAAE;YAAE;UAAE;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,aAErD;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAU,CAAC,eACX/H,OAAA,CAACtB,QAAQ;UAACsJ,OAAO,EAAEpE,eAAgB;UAAAyD,QAAA,eACjCrH,OAAA,CAAC5B,UAAU;YAACkK,KAAK,EAAC,OAAO;YAAAjB,QAAA,EAAC;UAAU;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACP,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,eAGN/H,OAAA,CAAClB,QAAQ;MAACyJ,EAAE,EAAEpH,eAAgB;MAAAkG,QAAA,eAC5BrH,OAAA,CAAC/B,GAAG;QAAC+I,EAAE,EAAE;UACPM,CAAC,EAAE,GAAG;UACNC,YAAY,EAAE,CAAC;UACfC,WAAW,EAAE,SAAS;UACtBgB,UAAU,EAAE;QACd,CAAE;QAAAnB,QAAA,gBACArH,OAAA,CAAC/B,GAAG;UAAC+I,EAAE,EAAE;YAAEC,OAAO,EAAE,MAAM;YAAEQ,cAAc,EAAE,eAAe;YAAEC,UAAU,EAAE,QAAQ;YAAEe,EAAE,EAAE;UAAE,CAAE;UAAApB,QAAA,gBACzFrH,OAAA,CAAC5B,UAAU;YAACuJ,OAAO,EAAC,WAAW;YAAAN,QAAA,EAAC;UAAuB;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACpE/H,OAAA,CAAC7B,MAAM;YACLuK,IAAI,EAAC,OAAO;YACZV,OAAO,EAAEA,CAAA,KAAMhH,iBAAiB,CAAC,CAACD,cAAc,CAAE;YAClDiG,EAAE,EAAE;cAAE2B,QAAQ,EAAE,MAAM;cAAEC,EAAE,EAAE;YAAE,CAAE;YAAAvB,QAAA,EAE/BtG,cAAc,GAAG,WAAW,GAAG;UAAiB;YAAA6G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAEN/H,OAAA,CAAC/B,GAAG;UAAC+I,EAAE,EAAE;YAAEC,OAAO,EAAE,MAAM;YAAEC,aAAa,EAAE,QAAQ;YAAE2B,GAAG,EAAE;UAAI,CAAE;UAAAxB,QAAA,EAC7DyB,MAAM,CAACC,IAAI,CAACpH,iBAAiB,CAAC,CAC5BkD,MAAM,CAAC/C,QAAQ,IAAIf,cAAc,IAAIa,kBAAkB,CAAC2E,QAAQ,CAACzE,QAAQ,CAAC,CAAC,CAC3EuB,GAAG,CAAEvB,QAAQ,iBACZ9B,OAAA,CAAC/B,GAAG;YAAAoJ,QAAA,gBACFrH,OAAA,CAAC/B,GAAG;cACF+J,OAAO,EAAEA,CAAA,KAAMnG,cAAc,CAACC,QAAQ,CAAE;cACxCkF,EAAE,EAAE;gBACFC,OAAO,EAAE,MAAM;gBACfQ,cAAc,EAAE,eAAe;gBAC/BC,UAAU,EAAE,QAAQ;gBACpBsB,MAAM,EAAE,SAAS;gBACjBC,OAAO,EAAE,kBAAkB;gBAC3B3B,CAAC,EAAE,GAAG;gBACN4B,YAAY,EAAE,CAAC;gBACf,SAAS,EAAE;kBAAED,OAAO,EAAE;gBAAe;cACvC,CAAE;cAAA5B,QAAA,gBAEFrH,OAAA,CAAC5B,UAAU;gBAACuJ,OAAO,EAAC,OAAO;gBAACwB,UAAU,EAAC,QAAQ;gBAAA9B,QAAA,EAAEvF;cAAQ;gBAAA8F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAa,CAAC,eACvE/H,OAAA,CAAC5B,UAAU;gBAACuJ,OAAO,EAAC,OAAO;gBAACW,KAAK,EAAC,gBAAgB;gBAAAjB,QAAA,EAC/CxG,gBAAgB,KAAKiB,QAAQ,GAAG,GAAG,GAAG;cAAG;gBAAA8F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,eAEN/H,OAAA,CAAClB,QAAQ;cAACyJ,EAAE,EAAE1H,gBAAgB,KAAKiB,QAAS;cAAAuF,QAAA,eAC1CrH,OAAA,CAAC/B,GAAG;gBAAC+I,EAAE,EAAE;kBAAEC,OAAO,EAAE,MAAM;kBAAEmC,QAAQ,EAAE,MAAM;kBAAEP,GAAG,EAAE,GAAG;kBAAEvB,CAAC,EAAE,GAAG;kBAAE+B,EAAE,EAAE;gBAAE,CAAE;gBAAAhC,QAAA,EACrE1F,iBAAiB,CAACG,QAAQ,CAAC,CAACuB,GAAG,CAAC,CAACmB,KAAK,EAAEE,KAAK,kBAC5C1E,OAAA,CAACxB,IAAI;kBAEH8K,KAAK,EAAE9E,KAAM;kBACbwD,OAAO,EAAEA,CAAA,KAAMzD,oBAAoB,CAACC,KAAK,CAAE;kBAC3C+E,SAAS;kBACT5B,OAAO,EAAC,UAAU;kBAClBe,IAAI,EAAC,OAAO;kBACZ1B,EAAE,EAAE;oBAAEwC,CAAC,EAAE;kBAAI;gBAAE,GANV9E,KAAK;kBAAAkD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAOX,CACF;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA,GAlCHjG,QAAQ;YAAA8F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAmCb,CACR;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAGX/H,OAAA,CAAC/B,GAAG;MAAC+I,EAAE,EAAE;QACPC,OAAO,EAAE,MAAM;QACfC,aAAa,EAAE,QAAQ;QACvBuC,QAAQ,EAAE,CAAC;QACXC,QAAQ,EAAE,MAAM;QAChBpC,CAAC,EAAE,CAAC;QACJuB,GAAG,EAAE;MACP,CAAE;MAAAxB,QAAA,GACChH,IAAI,CAACgD,GAAG,CAAC,CAACC,GAAG,EAAEoB,KAAK,kBACnB1E,OAAA,CAAC/B,GAAG;QAEF+I,EAAE,EAAE;UACFC,OAAO,EAAE,MAAM;UACfC,aAAa,EAAE,QAAQ;UACvByC,SAAS,EAAErG,GAAG,CAACC,MAAM,KAAK,MAAM,GAAG,UAAU,GAAG,YAAY;UAC5DqG,QAAQ,EAAE,KAAK;UACfxC,QAAQ,EAAE;QACZ,CAAE;QAAAC,QAAA,eAEFrH,OAAA,CAAC3B,KAAK;UACJwL,SAAS,EAAEvG,GAAG,CAACC,MAAM,KAAK,MAAM,GAAG,CAAC,GAAG,CAAE;UACzCyD,EAAE,EAAE;YACFM,CAAC,EAAE,CAAC;YACJ4B,YAAY,EAAE,CAAC;YACfY,eAAe,EAAExG,GAAG,CAACC,MAAM,KAAK,MAAM,GAClC9B,KAAK,CAACsI,OAAO,CAACC,OAAO,CAACC,KAAK,GAC3BxI,KAAK,CAACsI,OAAO,CAACG,UAAU,CAACC,KAAK;YAClC7B,KAAK,EAAEhF,GAAG,CAACC,MAAM,KAAK,MAAM,GAAG9B,KAAK,CAACsI,OAAO,CAACC,OAAO,CAACI,YAAY,GAAG,SAAS;YAC7EC,MAAM,EAAE/G,GAAG,CAACC,MAAM,KAAK,MAAM,GAAG,MAAM,GAAG,aAAa9B,KAAK,CAACsI,OAAO,CAACO,OAAO;UAC7E,CAAE;UAAAjD,QAAA,gBAGFrH,OAAA,CAAC/B,GAAG;YAAC+I,EAAE,EAAE;cACPC,OAAO,EAAE,MAAM;cACfQ,cAAc,EAAE,eAAe;cAC/BC,UAAU,EAAE,QAAQ;cACpBe,EAAE,EAAE;YACN,CAAE;YAAApB,QAAA,gBACArH,OAAA,CAAC5B,UAAU;cAACuJ,OAAO,EAAC,SAAS;cAACW,KAAK,EAAEhF,GAAG,CAACC,MAAM,KAAK,MAAM,GAAG,SAAS,GAAG,gBAAiB;cAAA8D,QAAA,EACvF/D,GAAG,CAACC,MAAM,KAAK,MAAM,GAAG,KAAK,GAAG;YAAiB;cAAAqE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxC,CAAC,EACZzE,GAAG,CAAC2B,SAAS,iBACZjF,OAAA,CAAC5B,UAAU;cAACuJ,OAAO,EAAC,SAAS;cAACW,KAAK,EAAEhF,GAAG,CAACC,MAAM,KAAK,MAAM,GAAG,SAAS,GAAG,gBAAiB;cAAA8D,QAAA,EACvFV,UAAU,CAACrD,GAAG,CAAC2B,SAAS;YAAC;cAAA2C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChB,CACb;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAEN/H,OAAA,CAAC5B,UAAU;YAACuJ,OAAO,EAAC,OAAO;YAAAN,QAAA,EAAE/D,GAAG,CAACtB;UAAI;YAAA4F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAa,CAAC,EAElDzE,GAAG,CAACrB,KAAK,iBACRjC,OAAA,CAAC5B,UAAU;YAACkK,KAAK,EAAC,OAAO;YAACX,OAAO,EAAC,SAAS;YAACX,EAAE,EAAE;cAAEuD,EAAE,EAAE,CAAC;cAAEtD,OAAO,EAAE;YAAQ,CAAE;YAAAI,QAAA,EAAC;UAE7E;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CACb,EAEAzE,GAAG,CAACmC,SAAS,IAAInC,GAAG,CAACmC,SAAS,CAACI,MAAM,GAAG,CAAC,iBACxC7F,OAAA,CAACH,eAAe;YAAC4F,SAAS,EAAEnC,GAAG,CAACmC;UAAU;YAAAmC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAC7C,EAGAzE,GAAG,CAACC,MAAM,KAAK,KAAK,iBACnBvD,OAAA,CAAC/B,GAAG;YAAC+I,EAAE,EAAE;cACPC,OAAO,EAAE,MAAM;cACfQ,cAAc,EAAE,UAAU;cAC1B8C,EAAE,EAAE,CAAC;cACLC,OAAO,EAAE,GAAG;cACZ,SAAS,EAAE;gBAAEA,OAAO,EAAE;cAAE;YAC1B,CAAE;YAAAnD,QAAA,gBACArH,OAAA,CAACpB,OAAO;cAAC8D,KAAK,EAAC,eAAe;cAAA2E,QAAA,eAC5BrH,OAAA,CAAC1B,UAAU;gBACToK,IAAI,EAAC,OAAO;gBACZV,OAAO,EAAEA,CAAA,KAAMvE,SAAS,CAACC,SAAS,CAACC,SAAS,CAACL,GAAG,CAACtB,IAAI,CAAE;gBAAAqF,QAAA,eAEvDrH,OAAA,CAACX,eAAe;kBAAC+I,QAAQ,EAAC;gBAAO;kBAAAR,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1B;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,eACV/H,OAAA,CAACpB,OAAO;cAAC8D,KAAK,EAAEY,GAAG,CAACsB,KAAK,GAAG,gBAAgB,GAAG,cAAe;cAAAyC,QAAA,eAC5DrH,OAAA,CAAC1B,UAAU;gBACToK,IAAI,EAAC,OAAO;gBACZV,OAAO,EAAEA,CAAA,KAAMvD,iBAAiB,CAACC,KAAK,CAAE;gBACxC4D,KAAK,EAAEhF,GAAG,CAACsB,KAAK,GAAG,SAAS,GAAG,SAAU;gBAAAyC,QAAA,EAExC/D,GAAG,CAACsB,KAAK,gBAAG5E,OAAA,CAACV,YAAY;kBAAC8I,QAAQ,EAAC;gBAAO;kBAAAR,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAAG/H,OAAA,CAACT,kBAAkB;kBAAC6I,QAAQ,EAAC;gBAAO;kBAAAR,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC9E;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACP,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACI;MAAC,GA9EHrD,KAAK;QAAAkD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OA+EP,CACN,CAAC,EAEDxH,SAAS,iBACRP,OAAA,CAAC/B,GAAG;QAAC+I,EAAE,EAAE;UAAEC,OAAO,EAAE,MAAM;UAAES,UAAU,EAAE,QAAQ;UAAEmB,GAAG,EAAE,CAAC;UAAEc,SAAS,EAAE;QAAa,CAAE;QAAAtC,QAAA,eAClFrH,OAAA,CAAC3B,KAAK;UACJwL,SAAS,EAAE,CAAE;UACb7C,EAAE,EAAE;YACFM,CAAC,EAAE,CAAC;YACJ4B,YAAY,EAAE,CAAC;YACfjC,OAAO,EAAE,MAAM;YACfS,UAAU,EAAE,QAAQ;YACpBmB,GAAG,EAAE;UACP,CAAE;UAAAxB,QAAA,gBAEFrH,OAAA,CAACzB,gBAAgB;YAACmK,IAAI,EAAE;UAAG;YAAAd,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC9B/H,OAAA,CAAC5B,UAAU;YAAAiJ,QAAA,EAAC;UAA0B;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACN,eAED/H,OAAA;QAAKyK,GAAG,EAAEpJ;MAAW;QAAAuG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrB,CAAC,eAGN/H,OAAA,CAAC/B,GAAG;MAAC+I,EAAE,EAAE;QACPM,CAAC,EAAE,CAAC;QACJoD,SAAS,EAAE,CAAC;QACZlD,WAAW,EAAE,SAAS;QACtBsC,eAAe,EAAErI,KAAK,CAACsI,OAAO,CAACG,UAAU,CAACC;MAC5C,CAAE;MAAA9C,QAAA,gBACArH,OAAA,CAAC/B,GAAG;QAAC+I,EAAE,EAAE;UAAEC,OAAO,EAAE,MAAM;UAAE4B,GAAG,EAAE;QAAE,CAAE;QAAAxB,QAAA,gBACnCrH,OAAA,CAAC9B,SAAS;UACRyM,SAAS;UACThD,OAAO,EAAC,UAAU;UAClBiD,KAAK,EAAEzK,OAAQ;UACf0K,QAAQ,EAAG/G,CAAC,IAAK1D,UAAU,CAAC0D,CAAC,CAACE,MAAM,CAAC4G,KAAK,CAAE;UAC5CE,WAAW,EAAC,6BAA6B;UACzCC,UAAU,EAAGjH,CAAC,IAAKA,CAAC,CAACkH,GAAG,KAAK,OAAO,IAAIlG,UAAU,CAAC,CAAE;UACrDmG,UAAU,EAAE;YACVC,YAAY,eACVlL,OAAA,CAACrB,cAAc;cAACyI,QAAQ,EAAC,KAAK;cAAAC,QAAA,gBAC5BrH,OAAA,CAACpB,OAAO;gBAAC8D,KAAK,EAAC,iBAAiB;gBAAA2E,QAAA,eAC9BrH,OAAA,CAAC1B,UAAU;kBACT6M,IAAI,EAAC,KAAK;kBACVnD,OAAO,EAAEA,CAAA;oBAAA,IAAAoD,qBAAA;oBAAA,QAAAA,qBAAA,GAAM5J,YAAY,CAACoB,OAAO,cAAAwI,qBAAA,uBAApBA,qBAAA,CAAsBC,KAAK,CAAC,CAAC;kBAAA,CAAC;kBAAAhE,QAAA,eAE7CrH,OAAA,CAACR,cAAc;oBAAAoI,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACR;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACV/H,OAAA;gBACEsL,IAAI,EAAC,MAAM;gBACXb,GAAG,EAAEjJ,YAAa;gBAClB+J,KAAK,EAAE;kBAAEtE,OAAO,EAAE;gBAAO,CAAE;gBAC3BuE,MAAM,EAAC,sBAAsB;gBAC7BX,QAAQ,EAAEhH;cAAiB;gBAAA+D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC5B,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACY;UAEpB;QAAE;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACF/H,OAAA,CAAC1B,UAAU;UACTgK,KAAK,EAAE7H,WAAW,GAAG,WAAW,GAAG,SAAU;UAC7CuH,OAAO,EAAEvH,WAAW,GAAGiG,aAAa,GAAGF,cAAe;UAAAa,QAAA,eAEtDrH,OAAA,CAACd,OAAO;YAAA0I,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eACb/H,OAAA,CAAC7B,MAAM;UACLwJ,OAAO,EAAC,WAAW;UACnB8D,OAAO,eAAEzL,OAAA,CAACf,QAAQ;YAAA2I,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UACtBC,OAAO,EAAElD,UAAW;UACpB4G,QAAQ,EAAEnL,SAAS,IAAIJ,OAAO,CAAC4E,IAAI,CAAC,CAAC,KAAK,EAAG;UAAAsC,QAAA,EAC9C;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAEN/H,OAAA,CAAC/B,GAAG;QAAC+I,EAAE,EAAE;UAAEC,OAAO,EAAE,MAAM;UAAES,UAAU,EAAE,QAAQ;UAAE6C,EAAE,EAAE,CAAC;UAAE9C,cAAc,EAAE;QAAgB,CAAE;QAAAJ,QAAA,gBACzFrH,OAAA,CAAC5B,UAAU;UAACuJ,OAAO,EAAC,SAAS;UAACW,KAAK,EAAC,gBAAgB;UAACtB,EAAE,EAAE;YAAEC,OAAO,EAAE,MAAM;YAAES,UAAU,EAAE;UAAS,CAAE;UAAAL,QAAA,gBACjGrH,OAAA,CAACZ,eAAe;YAACgJ,QAAQ,EAAC,OAAO;YAACpB,EAAE,EAAE;cAAEqB,EAAE,EAAE;YAAI;UAAE;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,2CAEvD;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACb/H,OAAA,CAACxB,IAAI;UACH8K,KAAK,EAAC,YAAY;UAClBZ,IAAI,EAAC,OAAO;UACZJ,KAAK,EAAC,SAAS;UACfX,OAAO,EAAC,UAAU;UAClBX,EAAE,EAAE;YAAEG,MAAM,EAAE;UAAG;QAAE;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC7H,EAAA,CA1hBQD,IAAI;EAAA,QAcGjB,QAAQ,EACLS,WAAW;AAAA;AAAAkM,EAAA,GAfrB1L,IAAI;AA4hBb,eAAeA,IAAI;AAAC,IAAA0L,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}