{"ast":null,"code":"var _jsxFileName = \"D:\\\\Legal Assistant for Indian Laws\\\\client\\\\src\\\\components\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Box, TextField, Button, Typography, Paper, IconButton, CircularProgress, Chip, Menu, MenuItem, InputAdornment, Tooltip, Fade, Collapse, Divider, useTheme } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport MicIcon from '@mui/icons-material/Mic';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport { useLocation } from 'react-router-dom';\nimport { processLegalQuery } from '../services/queryService';\nimport { extractCitationReferences, enhanceTextWithCitations } from '../services/citationService';\nimport CitationDisplay from './CitationDisplay';\nimport { trackQuery } from '../services/analyticsService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Chat() {\n  _s();\n  const [message, setMessage] = useState('');\n  const [chat, setChat] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [suggestedQueries, setSuggestedQueries] = useState([\"What are the grounds for divorce in India?\", \"Explain property inheritance laws in India\", \"What is the process for filing an FIR?\", \"Consumer rights under Consumer Protection Act\"]);\n  const [savedMessages, setSavedMessages] = useState([]);\n  const chatEndRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const fileInputRef = useRef(null);\n  const theme = useTheme();\n  const location = useLocation();\n\n  // Process the query\n  const processQuery = useCallback(async text => {\n    try {\n      return await processLegalQuery(text);\n    } catch (error) {\n      console.error(\"Error in process query:\", error);\n      throw error;\n    }\n  }, []);\n\n  // Handle initial query from navigation state\n  useEffect(() => {\n    var _location$state;\n    if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.initialQuery) {\n      const initialQuery = location.state.initialQuery;\n      // Set message instead of sending it immediately to give user control\n      setMessage(initialQuery);\n      // Clean up navigation state\n      window.history.replaceState({}, document.title);\n    }\n  }, [location.state]);\n\n  // Scroll to bottom of chat\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [chat]);\n  const handleMenuOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n  const handleCopyChat = () => {\n    const chatText = chat.map(msg => `${msg.sender === 'user' ? 'You' : 'Legal Assistant'}: ${msg.text}`).join('\\n\\n');\n    navigator.clipboard.writeText(chatText);\n    handleMenuClose();\n  };\n  const handleClearChat = () => {\n    setChat([]);\n    handleMenuClose();\n  };\n  const handleFileUpload = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = event => {\n        // In a real app, you would send this to your backend for processing\n        setMessage(`Analyzing document: ${file.name}...`);\n      };\n      reader.readAsText(file);\n    }\n  };\n  const handleSuggestedQuery = query => {\n    setMessage(query);\n  };\n  const toggleSaveMessage = index => {\n    const updatedChat = [...chat];\n    updatedChat[index].saved = !updatedChat[index].saved;\n    setChat(updatedChat);\n\n    // Update saved messages list\n    if (updatedChat[index].saved) {\n      setSavedMessages([...savedMessages, updatedChat[index]]);\n    } else {\n      setSavedMessages(savedMessages.filter(msg => msg !== chat[index]));\n    }\n  };\n  const handleSend = async () => {\n    if (message.trim() === '') return;\n\n    // Add user message to chat\n    const userMessage = {\n      text: message,\n      sender: 'user',\n      timestamp: new Date()\n    };\n    setChat(prevChat => [...prevChat, userMessage]);\n    const userInput = message;\n    setMessage('');\n    setIsLoading(true);\n\n    // Track query start time\n    const startTime = new Date();\n    try {\n      // Send to backend API\n      const response = await processQuery(userInput);\n\n      // Extract citation references from the response\n      const citationRefs = extractCitationReferences(response);\n\n      // Enhance text with citation markers\n      const {\n        enhancedText,\n        citations\n      } = enhanceTextWithCitations(response, citationRefs);\n\n      // Add response to chat with citations\n      setChat(prevChat => [...prevChat, {\n        text: enhancedText,\n        sender: 'bot',\n        timestamps: new Date(),\n        citations: citations,\n        saved: false\n      }]);\n\n      // Track analytics data\n      trackQuery({\n        query: userInput,\n        responseTime: new Date() - startTime,\n        citationsCount: citations.length,\n        citationsSources: citations.map(c => `${c.actName}, Section ${c.sectionNumber}`),\n        timestamp: new Date().toISOString(),\n        queryLength: userInput.length,\n        category: detectQueryCategory(userInput)\n      });\n    } catch (error) {\n      console.error('Error processing message:', error);\n      setChat(prevChat => [...prevChat, {\n        text: 'Sorry, I encountered an error processing your request.',\n        sender: 'bot',\n        error: true,\n        timestamp: new Date()\n      }]);\n\n      // Track failed query\n      trackQuery({\n        query: userInput,\n        error: true,\n        timestamp: new Date().toISOString(),\n        responseTime: new Date() - startTime\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Simple function to detect query category based on keywords\n  const detectQueryCategory = query => {\n    const lowercaseQuery = query.toLowerCase();\n    if (lowercaseQuery.includes('divorce') || lowercaseQuery.includes('marriage') || lowercaseQuery.includes('custody') || lowercaseQuery.includes('alimony')) {\n      return 'Family Law';\n    } else if (lowercaseQuery.includes('property') || lowercaseQuery.includes('land') || lowercaseQuery.includes('rent') || lowercaseQuery.includes('tenant')) {\n      return 'Property Law';\n    } else if (lowercaseQuery.includes('theft') || lowercaseQuery.includes('murder') || lowercaseQuery.includes('bail') || lowercaseQuery.includes('police')) {\n      return 'Criminal Law';\n    } else if (lowercaseQuery.includes('constitution') || lowercaseQuery.includes('rights') || lowercaseQuery.includes('fundamental')) {\n      return 'Constitutional Law';\n    } else if (lowercaseQuery.includes('company') || lowercaseQuery.includes('business') || lowercaseQuery.includes('contract')) {\n      return 'Corporate Law';\n    } else if (lowercaseQuery.includes('refund') || lowercaseQuery.includes('product') || lowercaseQuery.includes('service') || lowercaseQuery.includes('warranty')) {\n      return 'Consumer Protection';\n    }\n    return 'General Legal';\n  };\n\n  // Recording functionality remains the same\n  const startRecording = () => {\n    console.log(\"Start recording\");\n    setIsRecording(true);\n  };\n  const stopRecording = () => {\n    console.log(\"Stop recording\");\n    setIsRecording(false);\n  };\n  const formatTime = date => {\n    return new Date(date).toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: 'calc(100vh - 64px)',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        borderBottom: 1,\n        borderColor: 'divider',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: \"Legal Assistant Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handleMenuOpen,\n        children: /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu, {\n        anchorEl: anchorEl,\n        open: Boolean(anchorEl),\n        onClose: handleMenuClose,\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleCopyChat,\n          children: [/*#__PURE__*/_jsxDEV(ContentCopyIcon, {\n            fontSize: \"small\",\n            sx: {\n              mr: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this), \"Copy Chat\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleClearChat,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"error\",\n            children: \"Clear Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), chat.length === 0 && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle1\",\n        gutterBottom: true,\n        children: \"Suggested Legal Queries:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexWrap: 'wrap',\n          gap: 1\n        },\n        children: suggestedQueries.map((query, index) => /*#__PURE__*/_jsxDEV(Chip, {\n          label: query,\n          onClick: () => handleSuggestedQuery(query),\n          clickable: true,\n          variant: \"outlined\"\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        flexDirection: 'column',\n        flexGrow: 1,\n        overflow: 'auto',\n        p: 2,\n        gap: 2\n      },\n      children: [chat.map((msg, index) => /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignSelf: msg.sender === 'user' ? 'flex-end' : 'flex-start',\n          maxWidth: '80%',\n          position: 'relative'\n        },\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: msg.sender === 'user' ? 0 : 1,\n          sx: {\n            p: 2,\n            borderRadius: 2,\n            backgroundColor: msg.sender === 'user' ? theme.palette.primary.light : theme.palette.background.paper,\n            color: msg.sender === 'user' ? theme.palette.primary.contrastText : 'inherit',\n            border: msg.sender === 'user' ? 'none' : `1px solid ${theme.palette.divider}`\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: msg.sender === 'user' ? 'inherit' : 'text.secondary',\n              children: msg.sender === 'user' ? 'You' : 'Legal Assistant'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this), msg.timestamp && /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: msg.sender === 'user' ? 'inherit' : 'text.secondary',\n              children: formatTime(msg.timestamp)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 15\n          }, this), msg.error && /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"error\",\n            variant: \"caption\",\n            sx: {\n              mt: 1,\n              display: 'block'\n            },\n            children: \"Please try reformulating your question.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 17\n          }, this), msg.citations && msg.citations.length > 0 && /*#__PURE__*/_jsxDEV(CitationDisplay, {\n            citations: msg.citations\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 17\n          }, this), msg.sender === 'bot' && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'flex-end',\n              mt: 1,\n              opacity: 0.7,\n              '&:hover': {\n                opacity: 1\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Copy response\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => navigator.clipboard.writeText(msg.text),\n                children: /*#__PURE__*/_jsxDEV(ContentCopyIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: msg.saved ? \"Unsave message\" : \"Save message\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => toggleSaveMessage(index),\n                color: msg.saved ? \"primary\" : \"default\",\n                children: msg.saved ? /*#__PURE__*/_jsxDEV(BookmarkIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 36\n                }, this) : /*#__PURE__*/_jsxDEV(BookmarkBorderIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 72\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }, this)), isLoading && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 2,\n          alignSelf: 'flex-start'\n        },\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 1,\n          sx: {\n            p: 2,\n            borderRadius: 2,\n            display: 'flex',\n            alignItems: 'center',\n            gap: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: \"Processing your request...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        borderTop: 1,\n        borderColor: 'divider',\n        backgroundColor: theme.palette.background.paper\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          variant: \"outlined\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          placeholder: \"Type your legal question...\",\n          onKeyPress: e => e.key === 'Enter' && handleSend(),\n          InputProps: {\n            endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"end\",\n              children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Attach Document\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  edge: \"end\",\n                  onClick: () => {\n                    var _fileInputRef$current;\n                    return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                  },\n                  children: /*#__PURE__*/_jsxDEV(AttachFileIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 423,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                ref: fileInputRef,\n                style: {\n                  display: 'none'\n                },\n                accept: \".pdf,.doc,.docx,.txt\",\n                onChange: handleFileUpload\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this)\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          color: isRecording ? \"secondary\" : \"primary\",\n          onClick: isRecording ? stopRecording : startRecording,\n          children: /*#__PURE__*/_jsxDEV(MicIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          endIcon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 22\n          }, this),\n          onClick: handleSend,\n          disabled: isLoading || message.trim() === '',\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          mt: 1,\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          color: \"text.secondary\",\n          sx: {\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(HelpOutlineIcon, {\n            fontSize: \"small\",\n            sx: {\n              mr: 0.5\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this), \"Ask any legal question about Indian law\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Chip, {\n          label: \"AI Powered\",\n          size: \"small\",\n          color: \"primary\",\n          variant: \"outlined\",\n          sx: {\n            height: 24\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"D3uLL1D9QREHv8d8jq9uIt5rPdU=\", false, function () {\n  return [useTheme, useLocation];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Box","TextField","Button","Typography","Paper","IconButton","CircularProgress","Chip","Menu","MenuItem","InputAdornment","Tooltip","Fade","Collapse","Divider","useTheme","SendIcon","MicIcon","MoreVertIcon","HelpOutlineIcon","ContentCopyIcon","BookmarkIcon","BookmarkBorderIcon","AttachFileIcon","useLocation","processLegalQuery","extractCitationReferences","enhanceTextWithCitations","CitationDisplay","trackQuery","jsxDEV","_jsxDEV","Chat","_s","message","setMessage","chat","setChat","isLoading","setIsLoading","isRecording","setIsRecording","anchorEl","setAnchorEl","suggestedQueries","setSuggestedQueries","savedMessages","setSavedMessages","chatEndRef","mediaRecorderRef","audioChunksRef","fileInputRef","theme","location","processQuery","text","error","console","_location$state","state","initialQuery","window","history","replaceState","document","title","_chatEndRef$current","current","scrollIntoView","behavior","handleMenuOpen","event","currentTarget","handleMenuClose","handleCopyChat","chatText","map","msg","sender","join","navigator","clipboard","writeText","handleClearChat","handleFileUpload","e","file","target","files","reader","FileReader","onload","name","readAsText","handleSuggestedQuery","query","toggleSaveMessage","index","updatedChat","saved","filter","handleSend","trim","userMessage","timestamp","Date","prevChat","userInput","startTime","response","citationRefs","enhancedText","citations","timestamps","responseTime","citationsCount","length","citationsSources","c","actName","sectionNumber","toISOString","queryLength","category","detectQueryCategory","lowercaseQuery","toLowerCase","includes","startRecording","log","stopRecording","formatTime","date","toLocaleTimeString","hour","minute","sx","display","flexDirection","height","position","children","p","borderBottom","borderColor","justifyContent","alignItems","variant","fileName","_jsxFileName","lineNumber","columnNumber","onClick","open","Boolean","onClose","fontSize","mr","color","mb","gutterBottom","flexWrap","gap","label","clickable","flexGrow","overflow","alignSelf","maxWidth","elevation","borderRadius","backgroundColor","palette","primary","light","background","paper","contrastText","border","divider","mt","opacity","size","ref","borderTop","fullWidth","value","onChange","placeholder","onKeyPress","key","InputProps","endAdornment","edge","_fileInputRef$current","click","type","style","accept","endIcon","disabled","_c","$RefreshReg$"],"sources":["D:/Legal Assistant for Indian Laws/client/src/components/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { \r\n  Box, \r\n  TextField, \r\n  Button, \r\n  Typography, \r\n  Paper, \r\n  IconButton,\r\n  CircularProgress,\r\n  Chip,\r\n  Menu,\r\n  MenuItem,\r\n  InputAdornment,\r\n  Tooltip,\r\n  Fade,\r\n  Collapse,\r\n  Divider,\r\n  useTheme\r\n} from '@mui/material';\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport MicIcon from '@mui/icons-material/Mic';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\r\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy';\r\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\r\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\r\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { processLegalQuery } from '../services/queryService';\r\nimport { extractCitationReferences, enhanceTextWithCitations } from '../services/citationService';\r\nimport CitationDisplay from './CitationDisplay';\r\nimport { trackQuery } from '../services/analyticsService';\r\n\r\nfunction Chat() {\r\n  const [message, setMessage] = useState('');\r\n  const [chat, setChat] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [suggestedQueries, setSuggestedQueries] = useState([\r\n    \"What are the grounds for divorce in India?\",\r\n    \"Explain property inheritance laws in India\",\r\n    \"What is the process for filing an FIR?\",\r\n    \"Consumer rights under Consumer Protection Act\"\r\n  ]);\r\n  const [savedMessages, setSavedMessages] = useState([]);\r\n  const chatEndRef = useRef(null);\r\n  const mediaRecorderRef = useRef(null);\r\n  const audioChunksRef = useRef([]);\r\n  const fileInputRef = useRef(null);\r\n  const theme = useTheme();\r\n  const location = useLocation();\r\n  \r\n  // Process the query\r\n  const processQuery = useCallback(async (text) => {\r\n    try {\r\n      return await processLegalQuery(text);\r\n    } catch (error) {\r\n      console.error(\"Error in process query:\", error);\r\n      throw error;\r\n    }\r\n  }, []);\r\n\r\n  // Handle initial query from navigation state\r\n  useEffect(() => {\r\n    if (location.state?.initialQuery) {\r\n      const initialQuery = location.state.initialQuery;\r\n      // Set message instead of sending it immediately to give user control\r\n      setMessage(initialQuery);\r\n      // Clean up navigation state\r\n      window.history.replaceState({}, document.title);\r\n    }\r\n  }, [location.state]);\r\n\r\n  // Scroll to bottom of chat\r\n  useEffect(() => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [chat]);\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleCopyChat = () => {\r\n    const chatText = chat.map(msg => `${msg.sender === 'user' ? 'You' : 'Legal Assistant'}: ${msg.text}`).join('\\n\\n');\r\n    navigator.clipboard.writeText(chatText);\r\n    handleMenuClose();\r\n  };\r\n\r\n  const handleClearChat = () => {\r\n    setChat([]);\r\n    handleMenuClose();\r\n  };\r\n\r\n  const handleFileUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        // In a real app, you would send this to your backend for processing\r\n        setMessage(`Analyzing document: ${file.name}...`);\r\n      };\r\n      reader.readAsText(file);\r\n    }\r\n  };\r\n\r\n  const handleSuggestedQuery = (query) => {\r\n    setMessage(query);\r\n  };\r\n\r\n  const toggleSaveMessage = (index) => {\r\n    const updatedChat = [...chat];\r\n    updatedChat[index].saved = !updatedChat[index].saved;\r\n    setChat(updatedChat);\r\n    \r\n    // Update saved messages list\r\n    if (updatedChat[index].saved) {\r\n      setSavedMessages([...savedMessages, updatedChat[index]]);\r\n    } else {\r\n      setSavedMessages(savedMessages.filter(msg => msg !== chat[index]));\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if (message.trim() === '') return;\r\n    \r\n    // Add user message to chat\r\n    const userMessage = { text: message, sender: 'user', timestamp: new Date() };\r\n    setChat(prevChat => [...prevChat, userMessage]);\r\n    const userInput = message;\r\n    setMessage('');\r\n    setIsLoading(true);\r\n    \r\n    // Track query start time\r\n    const startTime = new Date();\r\n    \r\n    try {\r\n      // Send to backend API\r\n      const response = await processQuery(userInput);\r\n      \r\n      // Extract citation references from the response\r\n      const citationRefs = extractCitationReferences(response);\r\n      \r\n      // Enhance text with citation markers\r\n      const { enhancedText, citations } = enhanceTextWithCitations(response, citationRefs);\r\n      \r\n      // Add response to chat with citations\r\n      setChat(prevChat => [...prevChat, { \r\n        text: enhancedText, \r\n        sender: 'bot',\r\n        timestamps: new Date(),\r\n        citations: citations,\r\n        saved: false\r\n      }]);\r\n      \r\n      // Track analytics data\r\n      trackQuery({\r\n        query: userInput,\r\n        responseTime: new Date() - startTime,\r\n        citationsCount: citations.length,\r\n        citationsSources: citations.map(c => `${c.actName}, Section ${c.sectionNumber}`),\r\n        timestamp: new Date().toISOString(),\r\n        queryLength: userInput.length,\r\n        category: detectQueryCategory(userInput)\r\n      });\r\n    } catch (error) {\r\n      console.error('Error processing message:', error);\r\n      setChat(prevChat => [...prevChat, { \r\n        text: 'Sorry, I encountered an error processing your request.', \r\n        sender: 'bot',\r\n        error: true,\r\n        timestamp: new Date()\r\n      }]);\r\n      \r\n      // Track failed query\r\n      trackQuery({\r\n        query: userInput,\r\n        error: true,\r\n        timestamp: new Date().toISOString(),\r\n        responseTime: new Date() - startTime\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  // Simple function to detect query category based on keywords\r\n  const detectQueryCategory = (query) => {\r\n    const lowercaseQuery = query.toLowerCase();\r\n    if (lowercaseQuery.includes('divorce') || lowercaseQuery.includes('marriage') || \r\n        lowercaseQuery.includes('custody') || lowercaseQuery.includes('alimony')) {\r\n      return 'Family Law';\r\n    } else if (lowercaseQuery.includes('property') || lowercaseQuery.includes('land') || \r\n               lowercaseQuery.includes('rent') || lowercaseQuery.includes('tenant')) {\r\n      return 'Property Law';\r\n    } else if (lowercaseQuery.includes('theft') || lowercaseQuery.includes('murder') || \r\n               lowercaseQuery.includes('bail') || lowercaseQuery.includes('police')) {\r\n      return 'Criminal Law';\r\n    } else if (lowercaseQuery.includes('constitution') || lowercaseQuery.includes('rights') || \r\n               lowercaseQuery.includes('fundamental')) {\r\n      return 'Constitutional Law';\r\n    } else if (lowercaseQuery.includes('company') || lowercaseQuery.includes('business') || \r\n               lowercaseQuery.includes('contract')) {\r\n      return 'Corporate Law';\r\n    } else if (lowercaseQuery.includes('refund') || lowercaseQuery.includes('product') || \r\n               lowercaseQuery.includes('service') || lowercaseQuery.includes('warranty')) {\r\n      return 'Consumer Protection';\r\n    }\r\n    return 'General Legal';\r\n  };\r\n  \r\n  // Recording functionality remains the same\r\n  const startRecording = () => {\r\n    console.log(\"Start recording\");\r\n    setIsRecording(true);\r\n  };\r\n  \r\n  const stopRecording = () => {\r\n    console.log(\"Stop recording\");\r\n    setIsRecording(false);\r\n  };\r\n\r\n  const formatTime = (date) => {\r\n    return new Date(date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ \r\n      display: 'flex', \r\n      flexDirection: 'column', \r\n      height: 'calc(100vh - 64px)',\r\n      position: 'relative'\r\n    }}>\r\n      {/* Chat header */}\r\n      <Box sx={{ \r\n        p: 2, \r\n        borderBottom: 1, \r\n        borderColor: 'divider', \r\n        display: 'flex', \r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <Typography variant=\"h6\">Legal Assistant Chat</Typography>\r\n        <IconButton onClick={handleMenuOpen}>\r\n          <MoreVertIcon />\r\n        </IconButton>\r\n        <Menu\r\n          anchorEl={anchorEl}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleMenuClose}\r\n        >\r\n          <MenuItem onClick={handleCopyChat}>\r\n            <ContentCopyIcon fontSize=\"small\" sx={{ mr: 1 }} />\r\n            Copy Chat\r\n          </MenuItem>\r\n          <MenuItem onClick={handleClearChat}>\r\n            <Typography color=\"error\">Clear Chat</Typography>\r\n          </MenuItem>\r\n        </Menu>\r\n      </Box>\r\n      \r\n      {/* Suggested queries */}\r\n      {chat.length === 0 && (\r\n        <Box sx={{ p: 2, mb: 2 }}>\r\n          <Typography variant=\"subtitle1\" gutterBottom>\r\n            Suggested Legal Queries:\r\n          </Typography>\r\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n            {suggestedQueries.map((query, index) => (\r\n              <Chip \r\n                key={index} \r\n                label={query} \r\n                onClick={() => handleSuggestedQuery(query)} \r\n                clickable \r\n                variant=\"outlined\"\r\n              />\r\n            ))}\r\n          </Box>\r\n        </Box>\r\n      )}\r\n\r\n      {/* Chat messages display */}\r\n      <Box sx={{ \r\n        display: 'flex', \r\n        flexDirection: 'column', \r\n        flexGrow: 1, \r\n        overflow: 'auto',\r\n        p: 2,\r\n        gap: 2\r\n      }}>\r\n        {chat.map((msg, index) => (\r\n          <Box \r\n            key={index} \r\n            sx={{ \r\n              display: 'flex', \r\n              flexDirection: 'column',\r\n              alignSelf: msg.sender === 'user' ? 'flex-end' : 'flex-start',\r\n              maxWidth: '80%',\r\n              position: 'relative'\r\n            }}\r\n          >\r\n            <Paper \r\n              elevation={msg.sender === 'user' ? 0 : 1}\r\n              sx={{ \r\n                p: 2,\r\n                borderRadius: 2,\r\n                backgroundColor: msg.sender === 'user' \r\n                  ? theme.palette.primary.light \r\n                  : theme.palette.background.paper,\r\n                color: msg.sender === 'user' ? theme.palette.primary.contrastText : 'inherit',\r\n                border: msg.sender === 'user' ? 'none' : `1px solid ${theme.palette.divider}`\r\n              }}\r\n            >\r\n              {/* Message header */}\r\n              <Box sx={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between', \r\n                alignItems: 'center', \r\n                mb: 1 \r\n              }}>\r\n                <Typography variant=\"caption\" color={msg.sender === 'user' ? 'inherit' : 'text.secondary'}>\r\n                  {msg.sender === 'user' ? 'You' : 'Legal Assistant'}\r\n                </Typography>\r\n                {msg.timestamp && (\r\n                  <Typography variant=\"caption\" color={msg.sender === 'user' ? 'inherit' : 'text.secondary'}>\r\n                    {formatTime(msg.timestamp)}\r\n                  </Typography>\r\n                )}\r\n              </Box>\r\n              \r\n              <Typography variant=\"body1\">{msg.text}</Typography>\r\n              \r\n              {msg.error && (\r\n                <Typography color=\"error\" variant=\"caption\" sx={{ mt: 1, display: 'block' }}>\r\n                  Please try reformulating your question.\r\n                </Typography>\r\n              )}\r\n              \r\n              {msg.citations && msg.citations.length > 0 && (\r\n                <CitationDisplay citations={msg.citations} />\r\n              )}\r\n              \r\n              {/* Message actions */}\r\n              {msg.sender === 'bot' && (\r\n                <Box sx={{ \r\n                  display: 'flex', \r\n                  justifyContent: 'flex-end', \r\n                  mt: 1,\r\n                  opacity: 0.7,\r\n                  '&:hover': { opacity: 1 }\r\n                }}>\r\n                  <Tooltip title=\"Copy response\">\r\n                    <IconButton \r\n                      size=\"small\" \r\n                      onClick={() => navigator.clipboard.writeText(msg.text)}\r\n                    >\r\n                      <ContentCopyIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <Tooltip title={msg.saved ? \"Unsave message\" : \"Save message\"}>\r\n                    <IconButton \r\n                      size=\"small\" \r\n                      onClick={() => toggleSaveMessage(index)}\r\n                      color={msg.saved ? \"primary\" : \"default\"}\r\n                    >\r\n                      {msg.saved ? <BookmarkIcon fontSize=\"small\" /> : <BookmarkBorderIcon fontSize=\"small\" />}\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </Box>\r\n              )}\r\n            </Paper>\r\n          </Box>\r\n        ))}\r\n        \r\n        {isLoading && (\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, alignSelf: 'flex-start' }}>\r\n            <Paper \r\n              elevation={1}\r\n              sx={{ \r\n                p: 2,\r\n                borderRadius: 2,\r\n                display: 'flex', \r\n                alignItems: 'center', \r\n                gap: 2\r\n              }}\r\n            >\r\n              <CircularProgress size={20} />\r\n              <Typography>Processing your request...</Typography>\r\n            </Paper>\r\n          </Box>\r\n        )}\r\n        \r\n        <div ref={chatEndRef} />\r\n      </Box>\r\n      \r\n      {/* Input area */}\r\n      <Box sx={{ \r\n        p: 2, \r\n        borderTop: 1, \r\n        borderColor: 'divider', \r\n        backgroundColor: theme.palette.background.paper\r\n      }}>\r\n        <Box sx={{ display: 'flex', gap: 1 }}>\r\n          <TextField\r\n            fullWidth\r\n            variant=\"outlined\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            placeholder=\"Type your legal question...\"\r\n            onKeyPress={(e) => e.key === 'Enter' && handleSend()}\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <Tooltip title=\"Attach Document\">\r\n                    <IconButton \r\n                      edge=\"end\" \r\n                      onClick={() => fileInputRef.current?.click()}\r\n                    >\r\n                      <AttachFileIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <input\r\n                    type=\"file\"\r\n                    ref={fileInputRef}\r\n                    style={{ display: 'none' }}\r\n                    accept=\".pdf,.doc,.docx,.txt\"\r\n                    onChange={handleFileUpload}\r\n                  />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n          <IconButton \r\n            color={isRecording ? \"secondary\" : \"primary\"}\r\n            onClick={isRecording ? stopRecording : startRecording}\r\n          >\r\n            <MicIcon />\r\n          </IconButton>\r\n          <Button \r\n            variant=\"contained\" \r\n            endIcon={<SendIcon />} \r\n            onClick={handleSend}\r\n            disabled={isLoading || message.trim() === ''}\r\n          >\r\n            Send\r\n          </Button>\r\n        </Box>\r\n        \r\n        <Box sx={{ display: 'flex', alignItems: 'center', mt: 1, justifyContent: 'space-between' }}>\r\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center' }}>\r\n            <HelpOutlineIcon fontSize=\"small\" sx={{ mr: 0.5 }} />\r\n            Ask any legal question about Indian law\r\n          </Typography>\r\n          <Chip \r\n            label=\"AI Powered\" \r\n            size=\"small\" \r\n            color=\"primary\" \r\n            variant=\"outlined\" \r\n            sx={{ height: 24 }}\r\n          />\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}